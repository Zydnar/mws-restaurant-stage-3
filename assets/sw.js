!function i(o,s,u){function c(r,t){if(!s[r]){if(!o[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+r+"'")}var n=s[r]={exports:{}};o[r][0].call(n.exports,function(t){var e=o[r][1][t];return c(e||t)},n,n.exports,i,o,s,u)}return s[r].exports}for(var a="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,r,n){(function(Re){"use strict";var t,e,De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e=function(){var Z=Object.keys,Q=Array.isArray,$="undefined"!=typeof self?self:"undefined"!=typeof window?window:Re;function tt(e,r){return"object"!==(void 0===r?"undefined":De(r))||Z(r).forEach(function(t){e[t]=r[t]}),e}var i=Object.getPrototypeOf,r={}.hasOwnProperty;function et(t,e){return r.call(t,e)}function rt(e,r){"function"==typeof r&&(r=r(i(e))),Z(r).forEach(function(t){nt(e,t,r[t])})}var o=Object.defineProperty;function nt(t,e,r,n){o(t,e,tt(r&&et(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function s(e){return{from:function(t){return e.prototype=Object.create(t.prototype),nt(e.prototype,"constructor",e),{extend:rt.bind(null,e.prototype)}}}}var u=Object.getOwnPropertyDescriptor;var n=[].slice;function it(t,e,r){return n.call(t,e,r)}function ot(t,e){return e(t)}function st(t){if(!t)throw new Error("Assertion Failed")}function c(t){$.setImmediate?setImmediate(t):setTimeout(t,0)}function ut(t,i){return t.reduce(function(t,e,r){var n=i(e,r);return n&&(t[n[0]]=n[1]),t},{})}function ct(t,e){return function(){try{t.apply(this,arguments)}catch(t){e(t)}}}function at(t,e,r){try{t.apply(null,r)}catch(t){e&&e(t)}}function lt(t,e){if(et(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var r=[],n=0,i=e.length;n<i;++n){var o=lt(t,e[n]);r.push(o)}return r}var s=e.indexOf(".");if(-1!==s){var u=t[e.substr(0,s)];return void 0===u?void 0:lt(u,e.substr(s+1))}}function ft(t,e,r){if(t&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){st("string"!=typeof r&&"length"in r);for(var n=0,i=e.length;n<i;++n)ft(t,e[n],r[n])}else{var o=e.indexOf(".");if(-1!==o){var s=e.substr(0,o),u=e.substr(o+1);if(""===u)void 0===r?delete t[s]:t[s]=r;else{var c=t[s];c||(c=t[s]={}),ft(c,u,r)}}else void 0===r?delete t[e]:t[e]=r}}function ht(t){var e={};for(var r in t)et(t,r)&&(e[r]=t[r]);return e}var e=[].concat;function pt(t){return e.apply([],t)}var a="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(pt([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(t){return $[t]}).map(function(t){return $[t]});function bt(t){if(!t||"object"!==(void 0===t?"undefined":De(t)))return t;var e;if(Q(t)){e=[];for(var r=0,n=t.length;r<n;++r)e.push(bt(t[r]))}else if(0<=a.indexOf(t.constructor))e=t;else for(var i in e=t.constructor?Object.create(t.constructor.prototype):{},t)et(t,i)&&(e[i]=bt(t[i]));return e}function dt(n,i,o,s){return o=o||{},s=s||"",Z(n).forEach(function(t){if(et(i,t)){var e=n[t],r=i[t];"object"===(void 0===e?"undefined":De(e))&&"object"===(void 0===r?"undefined":De(r))&&e&&r&&""+e.constructor==""+r.constructor?dt(e,r,o,s+t+"."):e!==r&&(o[s+t]=i[t])}else o[s+t]=void 0}),Z(i).forEach(function(t){et(n,t)||(o[s+t]=i[t])}),o}var l="undefined"!=typeof Symbol&&Symbol.iterator,f=l?function(t){var e;return null!=t&&(e=t[l])&&e.apply(t)}:function(){return null},vt={};function yt(t){var e,r,n,i;if(1===arguments.length){if(Q(t))return t.slice();if(this===vt&&"string"==typeof t)return[t];if(i=f(t)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==t)return[t];if("number"==typeof(e=t.length)){for(r=new Array(e);e--;)r[e]=t[e];return r}return[t]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}var mt="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function h(t,e){mt=t,p=e}var p=function(){return!0},t=!new Error("").stack;function gt(){if(t)try{throw new Error}catch(t){return t}return new Error}function wt(t,e){var r=t.stack;return r?(e=e||0,0===r.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),r.split("\n").slice(e).filter(p).map(function(t){return"\n"+t}).join("")):""}var b=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],d=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(b),v={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function y(t,e){this._e=gt(),this.name=t,this.message=e}function _t(t,e,r,n){this._e=gt(),this.failures=e,this.failedKeys=n,this.successCount=r}function xt(t,e){this._e=gt(),this.name="BulkError",this.failures=e,this.message=t+". Errors: "+e.map(function(t){return t.toString()}).filter(function(t,e,r){return r.indexOf(t)===e}).join("\n")}s(y).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+wt(this._e,2))}},toString:function(){return this.name+": "+this.message}}),s(_t).from(y),s(xt).from(y);var m=d.reduce(function(t,e){return t[e]=e+"Error",t},{}),g=y,Ot=d.reduce(function(t,r){var n=r+"Error";function e(t,e){this._e=gt(),this.name=n,t?"string"==typeof t?(this.message=t,this.inner=e||null):"object"===(void 0===t?"undefined":De(t))&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=v[r]||n,this.inner=null)}return s(e).from(g),t[r]=e,t},{});Ot.Syntax=SyntaxError,Ot.Type=TypeError,Ot.Range=RangeError;var w=b.reduce(function(t,e){return t[e+"Error"]=Ot[e],t},{});var _=d.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=Ot[e]),t},{});function St(){}function jt(t){return t}function Et(e,r){return null==e||e===jt?r:function(t){return r(e(t))}}function x(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function kt(i,o){return i===St?o:function(){var t=i.apply(this,arguments);void 0!==t&&(arguments[0]=t);var e=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var n=o.apply(this,arguments);return e&&(this.onsuccess=this.onsuccess?x(e,this.onsuccess):e),r&&(this.onerror=this.onerror?x(r,this.onerror):r),void 0!==n?n:t}}function Pt(r,n){return r===St?n:function(){r.apply(this,arguments);var t=this.onsuccess,e=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?x(t,this.onsuccess):t),e&&(this.onerror=this.onerror?x(e,this.onerror):e)}}function At(o,s){return o===St?s:function(t){var e=o.apply(this,arguments);tt(t,e);var r=this.onsuccess,n=this.onerror;this.onsuccess=null,this.onerror=null;var i=s.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?x(r,this.onsuccess):r),n&&(this.onerror=this.onerror?x(n,this.onerror):n),void 0===e?void 0===i?void 0:i:tt(e,i)}}function O(t,e){return t===St?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function Tt(i,o){return i===St?o:function(){var t=i.apply(this,arguments);if(t&&"function"==typeof t.then){for(var e=this,r=arguments.length,n=new Array(r);r--;)n[r]=arguments[r];return t.then(function(){return o.apply(e,n)})}return o.apply(this,arguments)}}_.ModifyError=_t,_.DexieError=y,_.BulkError=xt;var S={},j=100,E=7,k=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=$.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),P=k[0],A=k[1],T=k[2],I=A&&A.then,It=P&&P.constructor,Rt=k[3],R=!!T,D=!1,C=T?function(){T.then(Mt)}:$.setImmediate?setImmediate.bind(null,Mt):$.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){Mt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Mt,0)},N=function(t,e){V.push([t,e]),M&&(C(),M=!1)},L=!0,M=!0,F=[],q=[],B=null,K=jt,U={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:se,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{se(t[0],t[1])}catch(t){}})}},Dt=U,V=[],W=0,J=[];function Ct(t){if("object"!==De(this))throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=St,this._lib=!1;var e=this._PSD=Dt;if(mt&&(this._stackHolder=gt(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==S)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&X(this,this._value))}this._state=null,this._value=null,++e.ref,function e(n,t){try{t(function(r){if(null===n._state){if(r===n)throw new TypeError("A promise cannot be resolved with itself.");var t=n._lib&&Ft();r&&"function"==typeof r.then?e(n,function(t,e){r instanceof Ct?r._then(t,e):r.then(t,e)}):(n._state=!0,n._value=r,G(n)),t&&qt()}},X.bind(null,n))}catch(t){X(n,t)}}(this,t)}var z={get:function(){var s=Dt,e=Ht;function t(r,n){var i=this,o=!s.global&&(s!==Dt||e!==Ht);o&&Zt();var t=new Ct(function(t,e){Y(i,new H(ne(r,s,o),ne(n,s,o),t,e,s))});return mt&&Lt(t,this),t}return t.prototype=S,t},set:function(t){nt(this,"then",t&&t.prototype===S?z:{get:function(){return t},set:z.set})}};function H(t,e,r,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=r,this.reject=n,this.psd=i}function X(e,r){if(q.push(r),null===e._state){var n,t=e._lib&&Ft();r=K(r),e._state=!1,e._value=r,mt&&null!==r&&"object"===(void 0===r?"undefined":De(r))&&!r._promise&&at(function(){var t=function t(e,r){var n;return u(e,r)||(n=i(e))&&t(n,r)}(r,"stack");r._promise=e,nt(r,"stack",{get:function(){return D?t&&(t.get?t.get.apply(r):t.value):e.stack}})}),n=e,F.some(function(t){return t._value===n._value})||F.push(n),G(e),t&&qt()}}function G(t){var e=t._listeners;t._listeners=[];for(var r=0,n=e.length;r<n;++r)Y(t,e[r]);var i=t._PSD;--i.ref||i.finalize(),0===W&&(++W,N(function(){0==--W&&Bt()},[]))}function Y(t,e){if(null!==t._state){var r=t._state?e.onFulfilled:e.onRejected;if(null===r)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++W,N(Nt,[r,t,e])}else t._listeners.push(e)}function Nt(t,e,r){try{var n,i=(B=e)._value;e._state?n=t(i):(q.length&&(q=[]),n=t(i),-1===q.indexOf(i)&&function(t){var e=F.length;for(;e;)if(F[--e]._value===t._value)return F.splice(e,1)}(e)),r.resolve(n)}catch(t){r.reject(t)}finally{B=null,0==--W&&Bt(),--r.psd.ref||r.psd.finalize()}}function Lt(t,e){var r=e?e._numPrev+1:0;r<j&&(t._prev=e,t._numPrev=r)}function Mt(){Ft()&&qt()}function Ft(){var t=L;return M=L=!1,t}function qt(){var t,e,r;do{for(;0<V.length;)for(t=V,V=[],r=t.length,e=0;e<r;++e){var n=t[e];n[0].apply(null,n[1])}}while(0<V.length);M=L=!0}function Bt(){var t=F;F=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=J.slice(0),r=e.length;r;)e[--r]()}function Kt(t){return new Ct(S,!1,t)}function Ut(r,n){var i=Dt;return function(){var t=Ft(),e=Dt;try{return te(i,!0),r.apply(this,arguments)}catch(t){n&&n(t)}finally{te(e,!1),t&&qt()}}}rt(Ct.prototype,{then:z,_then:function(t,e){Y(this,new H(null,null,t,e,Dt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=t,r=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?r(t):Kt(t)}):this.then(null,function(t){return t&&t.name===e?r(t):Kt(t)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Kt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{D=!0;var t=function t(e,r,n){if(r.length===n)return r;var i="";if(!1===e._state){var o,s,u=e._value;null!=u?(o=u.name||"Error",s=u.message||u,i=wt(u,0)):(o=u,s=""),r.push(o+(s?": "+s:"")+i)}mt&&((i=wt(e._stackHolder,2))&&-1===r.indexOf(i)&&r.push(i),e._prev&&t(e._prev,r,n));return r}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{D=!1}}},timeout:function(n,i){var o=this;return n<1/0?new Ct(function(t,e){var r=setTimeout(function(){return e(new Ot.Timeout(i))},n);o.then(t,e).finally(clearTimeout.bind(null,r))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&nt(Ct.prototype,Symbol.toStringTag,"Promise"),U.env=ee(),rt(Ct,{all:function(){var o=yt.apply(null,arguments).map(Qt);return new Ct(function(r,n){0===o.length&&r([]);var i=o.length;o.forEach(function(t,e){return Ct.resolve(t).then(function(t){o[e]=t,--i||r(o)},n)})})},resolve:function(r){if(r instanceof Ct)return r;if(r&&"function"==typeof r.then)return new Ct(function(t,e){r.then(t,e)});var t=new Ct(S,!0,r);return Lt(t,B),t},reject:Kt,race:function(){var t=yt.apply(null,arguments).map(Qt);return new Ct(function(e,r){t.map(function(t){return Ct.resolve(t).then(e,r)})})},PSD:{get:function(){return Dt},set:function(t){return Dt=t}},newPSD:Gt,usePSD:re,scheduler:{get:function(){return N},set:function(t){N=t}},rejectionMapper:{get:function(){return K},set:function(t){K=t}},follow:function(i,r){return new Ct(function(t,e){return Gt(function(r,n){var t=Dt;t.unhandleds=[],t.onunhandled=n,t.finalize=x(function(){var e,t=this;e=function(){0===t.unhandleds.length?r():n(t.unhandleds[0])},J.push(function t(){e(),J.splice(J.indexOf(t),1)}),++W,N(function(){0==--W&&Bt()},[])},t.finalize),i()},r,t,e)})}});var Vt={awaits:0,echoes:0,id:0},Wt=0,Jt=[],zt=0,Ht=0,Xt=0;function Gt(t,e,r,n){var i=Dt,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xt;var s=U.env;o.env=R?{Promise:Ct,PromiseProp:{value:Ct,configurable:!0,writable:!0},all:Ct.all,race:Ct.race,resolve:Ct.resolve,reject:Ct.reject,nthen:ie(s.nthen,o),gthen:ie(s.gthen,o)}:{},e&&tt(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=re(o,t,r,n);return 0===o.ref&&o.finalize(),u}function Yt(){return Vt.id||(Vt.id=++Wt),++Vt.awaits,Vt.echoes+=E,Vt.id}function Zt(t){!Vt.awaits||t&&t!==Vt.id||(0==--Vt.awaits&&(Vt.id=0),Vt.echoes=Vt.awaits*E)}function Qt(t){return Vt.echoes&&t&&t.constructor===It?(Yt(),t.then(function(t){return Zt(),t},function(t){return Zt(),ue(t)})):t}function $t(){var t=Jt[Jt.length-1];Jt.pop(),te(t,!1)}function te(t,e){var r,n=Dt;if((e?!Vt.echoes||zt++&&t===Dt:!zt||--zt&&t===Dt)||(r=e?function(t){++Ht,Vt.echoes&&0!=--Vt.echoes||(Vt.echoes=Vt.id=0),Jt.push(Dt),te(t,!0)}.bind(null,t):$t,I.call(P,r)),t!==Dt&&(Dt=t,n===U&&(U.env=ee()),R)){var i=U.env.Promise,o=t.env;A.then=o.nthen,i.prototype.then=o.gthen,(n.global||t.global)&&(Object.defineProperty($,"Promise",o.PromiseProp),i.all=o.all,i.race=o.race,i.resolve=o.resolve,i.reject=o.reject)}}function ee(){var t=$.Promise;return R?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor($,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:A.then,gthen:t.prototype.then}:{}}function re(t,e,r,n,i){var o=Dt;try{return te(t,!0),e(r,n,i)}finally{te(o,!1)}}function ne(e,r,n){return"function"!=typeof e?e:function(){var t=Dt;n&&Yt(),te(r,!0);try{return e.apply(this,arguments)}finally{te(t,!1)}}}function ie(r,n){return function(t,e){return r.call(this,ne(t,n,!1),ne(e,n,!1))}}var oe="unhandledrejection";function se(t,e){var r;try{r=e.onuncatched(t)}catch(t){}if(!1!==r)try{var n,i={promise:e,reason:t};if($.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(oe,!0,!0),tt(n,i)):$.CustomEvent&&tt(n=new CustomEvent(oe,{detail:i}),i),n&&$.dispatchEvent&&(dispatchEvent(n),!$.PromiseRejectionEvent&&$.onunhandledrejection))try{$.onunhandledrejection(n)}catch(t){}n.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}var ue=Ct.reject;function ce(i){var s={},e=function(t,e){if(e){for(var r=arguments.length,n=new Array(r-1);--r;)n[r-1]=arguments[r];return s[t].subscribe.apply(null,n),i}if("string"==typeof t)return s[t]};e.addEventType=u;for(var t=1,r=arguments.length;t<r;++t)u(arguments[t]);return e;function u(t,r,n){if("object"!==(void 0===t?"undefined":De(t))){var i;r||(r=O),n||(n=St);var o={subscribers:[],fire:n,subscribe:function(t){-1===o.subscribers.indexOf(t)&&(o.subscribers.push(t),o.fire=r(o.fire,t))},unsubscribe:function(e){o.subscribers=o.subscribers.filter(function(t){return t!==e}),o.fire=o.subscribers.reduce(r,n)}};return s[t]=e[t]=o,o}Z(i=t).forEach(function(t){var e=i[t];if(Q(e))u(t,i[t][0],i[t][1]);else{if("asap"!==e)throw new Ot.InvalidArgument("Invalid event config");var r=u(t,jt,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach(function(t){c(function(){t.apply(null,e)})})})}})}}var ae,le=String.fromCharCode(65535),fe=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return le}}(),he=-1/0,pe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",be="String expected.",de=[],ve="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ye=ve,me=ve,ge=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function we(o,t){var e,r,f,n,i,s=we.dependencies,u=tt({addons:we.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange},t),c=u.addons,a=u.autoOpen,l=u.indexedDB,g=u.IDBKeyRange,h=this._dbSchema={},p=[],b=[],d={},v=null,y=null,m=!1,w=null,_=!1,x="readonly",O="readwrite",S=this,j=new Ct(function(t){e=t}),E=new Ct(function(t,e){r=e}),k=!0,P=!!Ie(l);function A(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function T(t,e,r){var n=S._createTransaction(O,b,h);n.create(e),n._completion.catch(r);var i=n._reject.bind(n);Gt(function(){Dt.trans=n,0===t?(Z(h).forEach(function(t){I(e,t,h[t].primKey,h[t].indexes)}),Ct.follow(function(){return S.on.populate.fire(n)}).catch(i)):function(e,i,o){var r=[],t=p.filter(function(t){return t._cfg.version===e})[0];if(!t)throw new Ot.Upgrade("Dexie specification of currently installed DB version is missing");h=S._dbSchema=t._cfg.dbschema;var s=!1;return p.filter(function(t){return t._cfg.version>e}).forEach(function(n){r.push(function(){var t=h,e=n._cfg.dbschema;G(t,o),G(e,o),h=S._dbSchema=e;var r=function(t,e){var r={del:[],add:[],change:[]};for(var n in t)e[n]||r.del.push(n);for(n in e){var i=t[n],o=e[n];if(i){var s={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)s.recreate=!0,r.change.push(s);else{var u=i.idxByName,c=o.idxByName;for(var a in u)c[a]||s.del.push(a);for(a in c){var l=u[a],f=c[a];l?l.src!==f.src&&s.change.push(f):s.add.push(f)}(0<s.del.length||0<s.add.length||0<s.change.length)&&r.change.push(s)}}else r.add.push([n,o])}return r}(t,e);if(r.add.forEach(function(t){I(o,t[0],t[1].primKey,t[1].indexes)}),r.change.forEach(function(t){if(t.recreate)throw new Ot.Upgrade("Not yet support for changing primary key");var e=o.objectStore(t.name);t.add.forEach(function(t){R(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),R(e,t)}),t.del.forEach(function(t){e.deleteIndex(t)})}),n._cfg.contentUpgrade)return s=!0,Ct.follow(function(){n._cfg.contentUpgrade(i)})}),r.push(function(t){s&&ye||function(t,e){for(var r=0;r<e.db.objectStoreNames.length;++r){var n=e.db.objectStoreNames[r];null==t[n]&&e.db.deleteObjectStore(n)}}(n._cfg.dbschema,t)})}),function t(){return r.length?Ct.resolve(r.shift()(i.idbtrans)).then(t):Ct.resolve()}().then(function(){var e,r;r=o,Z(e=h).forEach(function(t){r.db.objectStoreNames.contains(t)||I(r,t,e[t].primKey,e[t].indexes)})})}(t,n,e).catch(i)})}function I(t,e,r,n){var i=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(t){R(i,t)}),i}function R(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function D(t,e,r){this.name=t,this.schema=e,this._tx=r,this.hook=d[t]?d[t].hook:ce(null,{creating:[kt,St],reading:[Et,jt],updating:[At,St],deleting:[Pt,St]})}function C(e,r,t){return(t?je:Oe)(function(t){e.push(t),r&&r()})}function N(a,l,f,h,p){return new Ct(function(n,t){var i=f.length,o=i-1;if(0===i)return n();if(h){var s,u=je(t),c=xe(null);at(function(){for(var t=0;t<i;++t){s={onsuccess:null,onerror:null};var e=f[t];p.call(s,e[0],e[1],l);var r=a.delete(e[0]);r._hookCtx=s,r.onerror=u,r.onsuccess=t===o?xe(n):c}},function(t){throw s.onerror&&s.onerror(t),t})}else for(var e=0;e<i;++e){var r=a.delete(f[e]);r.onerror=Oe(t),e===o&&(r.onsuccess=Ut(function(){return n()}))}})}function L(t,e,r,n){var i=this;this.db=S,this.mode=t,this.storeNames=e,this.idbtrans=null,this.on=ce(this,"complete","error","abort"),this.parent=n||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ct(function(t,e){i._resolve=t,i._reject=e}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(t){var e=i.active;return i.active=!1,i.on.error.fire(t),i.parent?i.parent._reject(t):e&&i.idbtrans&&i.idbtrans.abort(),ue(t)})}function M(t,e,r){this._ctx={table:t,index:":id"===e?null:e,or:r}}function F(t,e){var r=null,n=null;if(e)try{r=e()}catch(t){n=t}var i=t._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:o.hook.reading.fire}}function q(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function B(t,e){return t._cfg.version-e._cfg.version}function K(t,e,n){e.forEach(function(e){var r=n[e];t.forEach(function(t){e in t||(t===L.prototype||t instanceof L?nt(t,e,{get:function(){return this.table(e)}}):t[e]=new D(e,r))})})}function U(r,n,i,o,s,u){var c=Ut(u?function(t,e,r){return i(u(t),e,r)}:i,s);r.onerror||(r.onerror=Oe(s)),r.onsuccess=ct(n?function(){var t=r.result;if(t){var e=function(){t.continue()};n(t,function(t){e=t},o,s)&&c(t.value,t,function(t){e=t}),e()}else o()}:function(){var t=r.result;if(t){var e=function(){t.continue()};c(t.value,t,function(t){e=t}),e()}else o()},s)}function V(t,e){return l.cmp(t,e)}function W(t,e){return l.cmp(t,e)}function J(t,e){return l.cmp(e,t)}function z(t,e){return t<e?-1:t===e?0:1}function H(t,e){return e<t?-1:t===e?0:1}function X(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}function G(t,e){for(var r=e.db.objectStoreNames,n=0;n<r.length;++n){var i=r[n],o=e.objectStore(i);f="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var u=o.indexNames[s],c=o.index(u).keyPath,a="string"==typeof c?c:"["+it(c).join("+")+"]";if(t[i]){var l=t[i].idxByName[a];l&&(l.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&$.WorkerGlobalScope&&$ instanceof $.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f=!1)}function Y(e){S.on("blocked").fire(e),de.filter(function(t){return t.name===S.name&&t!==S&&!t._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}this.version=function(e){if(v||m)throw new Ot.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=p.filter(function(t){return t._cfg.version===e})[0];return t||(t=new A(e),p.push(t),p.sort(B),k=!1,t)},tt(A.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?tt(this._cfg.storesSource,t):t;var e={};p.forEach(function(t){tt(e,t._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(e,r),h=S._dbSchema=r,[d,S,L.prototype].forEach(function(t){for(var e in t)t[e]instanceof D&&delete t[e]}),K([d,S,L.prototype,this._cfg.tables],Z(r),r),b=Z(r),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(s,u){Z(s).forEach(function(t){if(null!==s[t]){var e={},r=(i=s[t],o=[],i.split(",").forEach(function(t){var e=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(e)?e.match(/^\[(.*)\]$/)[1].split("+"):e;o.push(new Pe(e,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Q(r),/\./.test(t)))}),o),n=r.shift();if(n.multi)throw new Ot.Schema("Primary key cannot be multi-valued");n.keyPath&&ft(e,n.keyPath,n.auto?0:n.keyPath),r.forEach(function(t){if(t.auto)throw new Ot.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Ot.Schema("Index must have a name and cannot be an empty string");ft(e,t.keyPath,t.compound?t.keyPath.map(function(){return""}):"")}),u[t]=new Ae(t,n,r,e)}var i,o})}}),this._allTables=d,this._createTransaction=function(t,e,r,n){return new L(t,e,r,n)},this._whenReady=function(t){return _||Dt.letThrough?t():new Ct(function(t,e){if(!m){if(!a)return void e(new Ot.DatabaseClosed);S.open().catch(St)}j.then(t,e)}).then(t)},this.verno=0,this.open=function(){if(m||v)return j.then(function(){return y?ue(y):S});mt&&(E._stackHolder=gt()),_=!(m=!0);var t=e,i=y=null;return Ct.race([E,new Ct(function(t,r){if(!l)throw new Ot.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var n=k?l.open(o):l.open(o,Math.round(10*S.verno));if(!n)throw new Ot.MissingAPI("IndexedDB API not available");n.onerror=Oe(r),n.onblocked=Ut(Y),n.onupgradeneeded=Ut(function(t){if(i=n.transaction,k&&!S._allowEmptyDB){n.onerror=Ee,i.abort(),n.result.close();var e=l.deleteDatabase(o);e.onsuccess=e.onerror=Ut(function(){r(new Ot.NoSuchDatabase("Database "+o+" doesnt exist"))})}else{i.onerror=Oe(r),T((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,i,r)}},r),n.onsuccess=Ut(function(){if(i=null,v=n.result,de.push(S),k)!function(){if(S.verno=v.version/10,S._dbSchema=h={},0===(b=it(v.objectStoreNames,0)).length)return;var a=v.transaction(Te(b),"readonly");b.forEach(function(t){for(var e=a.objectStore(t),r=e.keyPath,n=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new Pe(r,r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,n),o=[],s=0;s<e.indexNames.length;++s){var u=e.index(e.indexNames[s]);r=u.keyPath,n=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new Pe(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,n);o.push(c)}h[t]=new Ae(t,i,o,{})}),K([d],Z(h),h)}();else if(0<v.objectStoreNames.length)try{G(h,v.transaction(Te(v.objectStoreNames),x))}catch(t){}v.onversionchange=Ut(function(t){S._vcFired=!0,S.on("versionchange").fire(t)}),P||"__dbnames"===o||ae.dbnames.put({name:o}).catch(St),t()},r)})]).then(function(){return w=[],Ct.resolve(we.vip(S.on.ready.fire)).then(function t(){if(0<w.length){var e=w.reduce(Tt,St);return w=[],Ct.resolve(we.vip(e)).then(t)}})}).finally(function(){w=null}).then(function(){return m=!1,S}).catch(function(t){try{i&&i.abort()}catch(t){}return m=!1,S.close(),ue(y=t)}).finally(function(){_=!0,t()})},this.close=function(){var t=de.indexOf(S);if(0<=t&&de.splice(t,1),v){try{v.close()}catch(t){}v=null}a=!1,y=new Ot.DatabaseClosed,m&&r(y),j=new Ct(function(t){e=t}),E=new Ct(function(t,e){r=e})},this.delete=function(){var n=0<arguments.length;return new Ct(function(e,r){if(n)throw new Ot.InvalidArgument("Arguments not allowed in db.delete()");function t(){S.close();var t=l.deleteDatabase(o);t.onsuccess=Ut(function(){P||ae.dbnames.delete(o).catch(St),e()}),t.onerror=Oe(r),t.onblocked=Y}m?j.then(t):t()})},this.backendDB=function(){return v},this.isOpen=function(){return null!==v},this.hasBeenClosed=function(){return y&&y instanceof Ot.DatabaseClosed},this.hasFailed=function(){return null!==y},this.dynamicallyOpened=function(){return k},this.name=o,rt(this,{tables:{get:function(){return Z(d).map(function(t){return d[t]})}}}),this.on=ce(this,"populate","blocked","versionchange",{ready:[Tt,St]}),this.on.ready.subscribe=ot(this.on.ready.subscribe,function(r){return function(e,t){we.vip(function(){_?(y||Ct.resolve().then(e),t&&r(e)):w?(w.push(e),t&&r(e)):(r(e),t||r(function t(){S.on.ready.unsubscribe(e),S.on.ready.unsubscribe(t)}))})}}),this.transaction=function(){var t=function(t,e,r){var n=arguments.length;if(n<2)throw new Ot.InvalidArgument("Too few arguments");var i=new Array(n-1);for(;--n;)i[n-1]=arguments[n];r=i.pop();var o=pt(i);return[t,o,r]}.apply(this,arguments);return this._transaction.apply(this,t)},this._transaction=function(o,t,s){var u=Dt.trans;u&&u.db===S&&-1===o.indexOf("!")||(u=null);var e=-1!==o.indexOf("?");o=o.replace("!","").replace("?","");try{var c=t.map(function(t){var e=t instanceof D?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e});if("r"==o||o==x)o=x;else{if("rw"!=o&&o!=O)throw new Ot.InvalidArgument("Invalid transaction mode: "+o);o=O}if(u){if(u.mode===x&&o===O){if(!e)throw new Ot.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&c.forEach(function(t){if(u&&-1===u.storeNames.indexOf(t)){if(!e)throw new Ot.SubTransaction("Table "+t+" not included in parent transaction.");u=null}}),e&&u&&!u.active&&(u=null)}}catch(r){return u?u._promise(null,function(t,e){e(r)}):ue(r)}return u?u._promise(o,r,"lock"):Dt.trans?re(Dt.transless,function(){return S._whenReady(r)}):S._whenReady(r);function r(){return Ct.resolve().then(function(){var e,t=Dt.transless||Dt,r=S._createTransaction(o,c,h,u),n={trans:r,transless:t};u?r.idbtrans=u.idbtrans:r.create(),s.constructor===Rt&&Yt();var i=Ct.follow(function(){if(e=s.call(r,r))if(e.constructor===It){var t=Zt.bind(null,null);e.then(t,t)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=ke(e))},n);return(e&&"function"==typeof e.then?Ct.resolve(e).then(function(t){return r.active?t:ue(new Ot.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):i.then(function(){return e})).then(function(t){return u&&r._resolve(),r._completion.then(function(){return t})}).catch(function(t){return r._reject(t),ue(t)})})}},this.table=function(t){if(!et(d,t))throw new Ot.InvalidTable("Table "+t+" does not exist");return d[t]},rt(D.prototype,{_trans:function(t,e,r){var n=this._tx||Dt.trans;return n&&n.db===S?n===Dt.trans?n._promise(t,e,r):Gt(function(){return n._promise(t,e,r)},{trans:n,transless:Dt.transless||Dt}):function t(e,r,n){if(_||Dt.letThrough){var i=S._createTransaction(e,r,h);try{i.create()}catch(t){return ue(t)}return i._promise(e,function(t,e){return Gt(function(){return Dt.trans=i,n(t,e,i)})}).then(function(t){return i._completion.then(function(){return t})})}if(!m){if(!a)return ue(new Ot.DatabaseClosed);S.open().catch(St)}return j.then(function(){return t(e,r,n)})}(t,[this.name],e)},_idbstore:function(t,n,e){var i=this.name;return this._trans(t,function(t,e,r){if(-1===r.storeNames.indexOf(i))throw new Ot.NotFound("Table"+i+" not part of transaction");return n(t,e,r.idbtrans.objectStore(i),r)},e)},get:function(i,t){if(i&&i.constructor===Object)return this.where(i).first(t);var o=this;return this._idbstore(x,function(t,e,r){var n=r.get(i);n.onerror=Oe(e),n.onsuccess=Ut(function(){t(o.hook.reading.fire(n.result))},e)}).then(t)},where:function(r){if("string"==typeof r)return new M(this,r);if(Q(r))return new M(this,"["+r.join("+")+"]");var n=Z(r);if(1===n.length)return this.where(n[0]).equals(r[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&n.every(function(t){return 0<=e.keyPath.indexOf(t)})&&e.keyPath.every(function(t){return 0<=n.indexOf(t)})})[0];if(t&&fe!==le)return this.where(t.name).equals(t.keyPath.map(function(t){return r[t]}));t||console.warn("The query "+JSON.stringify(r)+" on "+this.name+" would benefit of a compound index ["+n.join("+")+"]");var i=this.schema.idxByName,e=n.reduce(function(t,e){return[t[0]||i[e],t[0]||!i[e]?X(t[1],function(t){return""+lt(t,e)==""+r[e]}):t[1]]},[null,null]),o=e[0];return o?this.where(o.name).equals(r[o.keyPath]).filter(e[1]):t?this.filter(e[1]):this.where(n).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new F(new M(this,Q(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new F(new M(this))},mapToClass:function(n,t){this.schema.mappedClass=n;var e=Object.create(n.prototype);t&&_e(e,t),this.schema.instanceTemplate=e;var r=function(t){if(!t)return t;var e=Object.create(n.prototype);for(var r in t)if(et(t,r))try{e[r]=t[r]}catch(t){}return e};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),n},defineClass:function(t){return this.mapToClass(we.defineClass(t),t)},bulkDelete:function(i){return this.hook.deleting.fire===St?this._idbstore(O,function(t,e,r,n){t(N(r,n,i,!1,St))}):this.where(":id").anyOf(i).delete().then(function(){})},bulkPut:function(p,b){var d=this;return this._idbstore(O,function(e,r,n){if(!n.keyPath&&!d.schema.primKey.auto&&!b)throw new Ot.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(n.keyPath&&b)throw new Ot.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(b&&b.length!==p.length)throw new Ot.InvalidArgument("Arguments objects and keys must have the same length");if(0===p.length)return e();var t,i,o=function(t){0===s.length?e(t):r(new xt(d.name+".bulkPut(): "+s.length+" of "+u+" operations failed",s))},s=[],u=p.length,c=d;if(d.hook.creating.fire===St&&d.hook.updating.fire===St){i=C(s);for(var a=0,l=p.length;a<l;++a)(t=b?n.put(p[a],b[a]):n.put(p[a])).onerror=i;t.onerror=C(s,o),t.onsuccess=Se(o)}else{var f=b||n.keyPath&&p.map(function(t){return lt(t,n.keyPath)}),h=f&&ut(f,function(t,e){return null!=t&&[t,p[e]]});(f?c.where(":id").anyOf(f.filter(function(t){return null!=t})).modify(function(){this.value=h[this.primKey],h[this.primKey]=null}).catch(_t,function(t){s=t.failures}).then(function(){for(var t=[],e=b&&[],r=f.length-1;0<=r;--r){var n=f[r];(null==n||h[n])&&(t.push(p[r]),b&&e.push(n),null!=n&&(h[n]=null))}return t.reverse(),b&&e.reverse(),c.bulkAdd(t,e)}).then(function(t){var e=f[f.length-1];return null!=e?e:t}):c.bulkAdd(p)).then(o).catch(xt,function(t){s=s.concat(t.failures),o()}).catch(r)}},"locked")},bulkAdd:function(b,d){var v=this,y=this.hook.creating.fire;return this._idbstore(O,function(e,r,s,u){if(!s.keyPath&&!v.schema.primKey.auto&&!d)throw new Ot.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&d)throw new Ot.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==b.length)throw new Ot.InvalidArgument("Arguments objects and keys must have the same length");if(0===b.length)return e();function t(t){0===n.length?e(t):r(new xt(v.name+".bulkAdd(): "+n.length+" of "+i+" operations failed",n))}var c,a,l,n=[],i=b.length;if(y!==St){var f,h=s.keyPath;a=C(n,null,!0),l=xe(null),at(function(){for(var t=0,e=b.length;t<e;++t){f={onerror:null,onsuccess:null};var r=d&&d[t],n=b[t],i=d?r:h?lt(n,h):void 0,o=y.call(f,i,n,u);null==i&&null!=o&&(h?ft(n=bt(n),h,o):r=o),(c=null!=r?s.add(n,r):s.add(n))._hookCtx=f,t<e-1&&(c.onerror=a,f.onsuccess&&(c.onsuccess=l))}},function(t){throw f.onerror&&f.onerror(t),t}),c.onerror=C(n,t,!0),c.onsuccess=xe(t)}else{a=C(n);for(var o=0,p=b.length;o<p;++o)(c=d?s.add(b[o],d[o]):s.add(b[o])).onerror=a;c.onerror=C(n,t),c.onsuccess=Se(t)}})},add:function(c,a){var l=this.hook.creating.fire;return this._idbstore(O,function(r,t,n,e){var i={onsuccess:null,onerror:null};if(l!==St){var o=null!=a?a:n.keyPath?lt(c,n.keyPath):void 0,s=l.call(i,o,c,e);null==o&&null!=s&&(n.keyPath?ft(c,n.keyPath,s):a=s)}try{var u=null!=a?n.add(c,a):n.add(c);u._hookCtx=i,u.onerror=je(t),u.onsuccess=xe(function(t){var e=n.keyPath;e&&ft(c,e,t),r(t)})}catch(t){throw i.onerror&&i.onerror(t),t}})},put:function(o,e){var r=this,t=this.hook.creating.fire,n=this.hook.updating.fire;if(t!==St||n!==St){var i=this.schema.primKey.keyPath,s=void 0!==e?e:i&&lt(o,i);return null==s?this.add(o):(o=bt(o),this._trans(O,function(){return r.where(":id").equals(s).modify(function(){this.value=o}).then(function(t){return 0===t?r.add(o,e):s})},"locked"))}return this._idbstore(O,function(r,t,n){var i=void 0!==e?n.put(o,e):n.put(o);i.onerror=Oe(t),i.onsuccess=Ut(function(t){var e=n.keyPath;e&&ft(o,e,t.target.result),r(i.result)})})},delete:function(i){return this.hook.deleting.subscribers.length?this.where(":id").equals(i).delete():this._idbstore(O,function(t,e,r){var n=r.delete(i);n.onerror=Oe(e),n.onsuccess=Ut(function(){t(n.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(O,function(t,e,r){var n=r.clear();n.onerror=Oe(e),n.onsuccess=Ut(function(){t(n.result)})})},update:function(e,r){if("object"!==(void 0===r?"undefined":De(r))||Q(r))throw new Ot.InvalidArgument("Modifications must be an object.");if("object"!==(void 0===e?"undefined":De(e))||Q(e))return this.where(":id").equals(e).modify(r);Z(r).forEach(function(t){ft(e,t,r[t])});var t=lt(e,this.schema.primKey.keyPath);return void 0===t?ue(new Ot.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(r)}}),rt(L.prototype,{_lock:function(){return st(!Dt.global),++this._reculock,1!==this._reculock||Dt.global||(Dt.lockOwnerFor=this),this},_unlock:function(){if(st(!Dt.global),0==--this._reculock)for(Dt.global||(Dt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{re(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&Dt.lockOwnerFor!==this},create:function(e){var r=this;if(!this.mode)return this;if(st(!this.idbtrans),!e&&!v)switch(y&&y.name){case"DatabaseClosedError":throw new Ot.DatabaseClosed(y);case"MissingAPIError":throw new Ot.MissingAPI(y.message,y);default:throw new Ot.OpenFailed(y)}if(!this.active)throw new Ot.TransactionInactive;return st(null===this._completion._state),(e=this.idbtrans=e||v.transaction(Te(this.storeNames),this.mode)).onerror=Ut(function(t){Ee(t),r._reject(e.error)}),e.onabort=Ut(function(t){Ee(t),r.active&&r._reject(new Ot.Abort(e.error)),r.active=!1,r.on("abort").fire(t)}),e.oncomplete=Ut(function(){r.active=!1,r._resolve()}),this},_promise:function(r,n,i){var o=this;if(r===O&&this.mode!==O)return ue(new Ot.ReadOnly("Transaction is readonly"));if(!this.active)return ue(new Ot.TransactionInactive);if(this._locked())return new Ct(function(t,e){o._blockedFuncs.push([function(){o._promise(r,n,i).then(t,e)},Dt])});if(i)return Gt(function(){var t=new Ct(function(t,e){o._lock();var r=n(t,e,o);r&&r.then&&r.then(t,e)});return t.finally(function(){return o._unlock()}),t._lib=!0,t});var t=new Ct(function(t,e){var r=n(t,e,o);r&&r.then&&r.then(t,e)});return t._lib=!0,t},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var n=this._root();if(t=Ct.resolve(t),n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return t});else{n._waitingFor=t,n._waitingQueue=[];var e=n.idbtrans.objectStore(n.storeNames[0]);!function t(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(e.get(-1/0).onsuccess=t)}()}var i=n._waitingFor;return new Ct(function(e,r){t.then(function(t){return n._waitingQueue.push(Ut(e.bind(null,t)))},function(t){return n._waitingQueue.push(Ut(r.bind(null,t)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},abort:function(){this.active&&this._reject(new Ot.Abort),this.active=!1},tables:{get:(n="Transaction.tables",i=function(){return d},function(){return console.warn(n+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+wt(gt(),1)),i.apply(this,arguments)})},table:function(t){var e=S.table(t);return new D(t,e.schema,this)}}),rt(M.prototype,function(){function y(t,e,r){var n=t instanceof M?new F(t):t;return n._ctx.error=r?new r(e):new TypeError(e),n}function h(t){return new F(t,function(){return g.only("")}).limit(0)}function m(t,e,r,n,i,o){for(var s=Math.min(t.length,n.length),u=-1,c=0;c<s;++c){var a=e[c];if(a!==n[c])return i(t[c],r[c])<0?t.substr(0,c)+r[c]+r.substr(c+1):i(t[c],n[c])<0?t.substr(0,c)+n[c]+r.substr(c+1):0<=u?t.substr(0,u)+e[u]+r.substr(u+1):null;i(t[c],a)<0&&(u=c)}return s<n.length&&"next"===o?t+r.substr(t.length):s<t.length&&"prev"===o?t.substr(0,r.length):u<0?null:t.substr(0,u)+n[u]+r.substr(u+1)}function e(t,c,r,n){var i,a,l,f,h,p,b,d=r.length;if(!r.every(function(t){return"string"==typeof t}))return y(t,be);function e(t){i="next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()},a="next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()},l="next"===t?z:H;var e=r.map(function(t){return{lower:a(t),upper:i(t)}}).sort(function(t,e){return l(t.lower,e.lower)});f=e.map(function(t){return t.upper}),h=e.map(function(t){return t.lower}),b="next"===(p=t)?"":n}e("next");var o=new F(t,function(){return g.bound(f[0],h[d-1]+n)});o._ondirectionchange=function(t){e(t)};var v=0;return o._addAlgorithm(function(t,e,r){var n=t.key;if("string"!=typeof n)return!1;var i=a(n);if(c(i,h,v))return!0;for(var o=null,s=v;s<d;++s){var u=m(n,i,f[s],h[s],l,p);null===u&&null===o?v=s+1:(null===o||0<l(o,u))&&(o=u)}return e(null!==o?function(){t.continue(o+b)}:r),!1}),o}return{between:function(t,e,r,n){r=!1!==r,n=!0===n;try{return 0<V(t,e)||0===V(t,e)&&(r||n)&&(!r||!n)?h(this):new F(this,function(){return g.bound(t,e,!r,!n)})}catch(t){return y(this,pe)}},equals:function(t){return new F(this,function(){return g.only(t)})},above:function(t){return new F(this,function(){return g.lowerBound(t,!0)})},aboveOrEqual:function(t){return new F(this,function(){return g.lowerBound(t)})},below:function(t){return new F(this,function(){return g.upperBound(t,!0)})},belowOrEqual:function(t){return new F(this,function(){return g.upperBound(t)})},startsWith:function(t){return"string"!=typeof t?y(this,be):this.between(t,t+le,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):e(this,function(t,e){return 0===t.indexOf(e[0])},[t],le)},equalsIgnoreCase:function(t){return e(this,function(t,e){return t===e[0]},[t],"")},anyOfIgnoreCase:function(){var t=yt.apply(vt,arguments);return 0===t.length?h(this):e(this,function(t,e){return-1!==e.indexOf(t)},t,"")},startsWithAnyOfIgnoreCase:function(){var t=yt.apply(vt,arguments);return 0===t.length?h(this):e(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},t,le)},anyOf:function(){var i=yt.apply(vt,arguments),o=W;try{i.sort(o)}catch(t){return y(this,pe)}if(0===i.length)return h(this);var t=new F(this,function(){return g.bound(i[0],i[i.length-1])});t._ondirectionchange=function(t){o="next"===t?W:J,i.sort(o)};var s=0;return t._addAlgorithm(function(t,e,r){for(var n=t.key;0<o(n,i[s]);)if(++s===i.length)return e(r),!1;return 0===o(n,i[s])||(e(function(){t.continue(i[s])}),!1)}),t},notEqual:function(t){return this.inAnyRange([[he,t],[t,fe]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=yt.apply(vt,arguments);if(0===t.length)return new F(this);try{t.sort(W)}catch(t){return y(this,pe)}var e=t.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[he,e]]},null);return e.push([t[t.length-1],fe]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(t,e){if(0===t.length)return h(this);if(!t.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&W(t[0],t[1])<=0}))return y(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ot.InvalidArgument);var r=!e||!1!==e.includeLowers,n=e&&!0===e.includeUppers;var o,s=W;function i(t,e){return s(t[0],e[0])}try{(o=t.reduce(function(t,e){for(var r=0,n=t.length;r<n;++r){var i=t[r];if(V(e[0],i[1])<0&&0<V(e[1],i[0])){i[0]=(u=i[0],c=e[0],V(u,c)<0?u:c),i[1]=(o=i[1],s=e[1],0<V(o,s)?o:s);break}}var o,s,u,c;return r===n&&t.push(e),t},[])).sort(i)}catch(t){return y(this,pe)}var u=0,c=n?function(t){return 0<W(t,o[u][1])}:function(t){return 0<=W(t,o[u][1])},a=r?function(t){return 0<J(t,o[u][0])}:function(t){return 0<=J(t,o[u][0])};var l=c,f=new F(this,function(){return g.bound(o[0][0],o[o.length-1][1],!r,!n)});return f._ondirectionchange=function(t){"next"===t?(l=c,s=W):(l=a,s=J),o.sort(i)},f._addAlgorithm(function(t,e,r){for(var n,i=t.key;l(i);)if(++u===o.length)return e(r),!1;return!c(n=i)&&!a(n)||(0===V(i,o[u][1])||0===V(i,o[u][0])||e(function(){s===W?t.continue(o[u][0]):t.continue(o[u][1])}),!1)}),f},startsWithAnyOf:function(){var t=yt.apply(vt,arguments);return t.every(function(t){return"string"==typeof t})?0===t.length?h(this):this.inAnyRange(t.map(function(t){return[t,t+le]})):y(this,"startsWithAnyOf() only works with strings")}}}),rt(F.prototype,function(){function o(t,e){t.filter=X(t.filter,e)}function r(t,e,r){var n=t.replayFilter;t.replayFilter=n?function(){return X(n(),e())}:e,t.justLimit=r&&!n}function c(t,e){if(t.isPrimKey)return e;var r=t.table.schema.idxByName[t.index];if(!r)throw new Ot.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return e.index(r.name)}function l(t,e){var r=c(t,e);return t.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(t.range||null,t.dir+t.unique):r.openCursor(t.range||null,t.dir+t.unique)}function a(r,u,n,c,i){var a=r.replayFilter?X(r.filter,r.replayFilter()):r.filter;r.or?function(){var o={},t=0;function s(){2==++t&&n()}function e(t,e,r){if(!a||a(e,r,s,c)){var n=e.primaryKey,i=""+n;"[object ArrayBuffer]"===i&&(i=""+new Uint8Array(n)),et(o,i)||(o[i]=!0,u(t,e,r))}}r.or._iterate(e,s,c,i),U(l(r,i),r.algorithm,e,s,c,!r.keysOnly&&r.valueMapper)}():U(l(r,i),X(r.algorithm,a),u,n,c,!r.keysOnly&&r.valueMapper)}return{_read:function(t,e){var r=this._ctx;return r.error?r.table._trans(null,ue.bind(null,r.error)):r.table._idbstore(x,t).then(e)},_write:function(t){var e=this._ctx;return e.error?e.table._trans(null,ue.bind(null,e.error)):e.table._idbstore(O,t,"locked")},_addAlgorithm:function(t){var e=this._ctx;e.algorithm=X(e.algorithm,t)},_iterate:function(t,e,r,n){return a(this._ctx,t,e,r,n)},clone:function(t){var e=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&tt(r,t),e._ctx=r,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(n){var i=this._ctx;return this._read(function(t,e,r){a(i,n,t,e,r)})},count:function(t){var o=this._ctx;if(q(o,!0))return this._read(function(e,t,r){var n=c(o,r),i=o.range?n.count(o.range):n.count();i.onerror=Oe(t),i.onsuccess=function(t){e(Math.min(t.target.result,o.limit))}},t);var n=0;return this._read(function(t,e,r){a(o,function(){return++n,!1},function(){t(n)},e,r)},t)},sortBy:function(t,e){var r=t.split(".").reverse(),n=r[0],i=r.length-1;function o(t,e){return e?o(t[r[e]],e-1):t[n]}var s="next"===this._ctx.dir?1:-1;function u(t,e){var r=o(t,i),n=o(e,i);return r<n?-s:n<r?s:0}return this.toArray(function(t){return t.sort(u)}).then(e)},toArray:function(t){var u=this._ctx;return this._read(function(e,r,t){if(f&&"next"===u.dir&&q(u,!0)&&0<u.limit){var n=u.table.hook.reading.fire,i=c(u,t),o=u.limit<1/0?i.getAll(u.range,u.limit):i.getAll(u.range);o.onerror=Oe(r),o.onsuccess=Se(n===jt?e:function(t){try{e(t.map(n))}catch(t){r(t)}})}else{var s=[];a(u,function(t){s.push(t)},function(){e(s)},r,t)}},t)},offset:function(e){var t=this._ctx;return e<=0||(t.offset+=e,q(t)?r(t,function(){var r=e;return function(t,e){return 0===r||(1===r?--r:e(function(){t.advance(r),r=0}),!1)}}):r(t,function(){var t=e;return function(){return--t<0}})),this},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),r(this._ctx,function(){var n=t;return function(t,e,r){return--n<=0&&e(r),0<=n}},!0),this},until:function(n,i){return o(this._ctx,function(t,e,r){return!n(t.value)||(e(r),i)}),this},first:function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},last:function(t){return this.reverse().first(t)},filter:function(e){var t,r;return o(this._ctx,function(t){return e(t.value)}),t=this._ctx,r=e,t.isMatch=X(t.isMatch,r),this},and:function(t){return this.filter(t)},or:function(t){return new M(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,e){r(e.key,e)})},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(r){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,e){r(e.primaryKey,e)})},keys:function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var r=[];return this.each(function(t,e){r.push(e.key)}).then(function(){return r}).then(t)},primaryKeys:function(t){var o=this._ctx;if(f&&"next"===o.dir&&q(o,!0)&&0<o.limit)return this._read(function(t,e,r){var n=c(o,r),i=o.limit<1/0?n.getAllKeys(o.range,o.limit):n.getAllKeys(o.range);i.onerror=Oe(e),i.onsuccess=Se(t)}).then(t);o.keysOnly=!o.isMatch;var r=[];return this.each(function(t,e){r.push(e.primaryKey)}).then(function(){return r}).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return o(this._ctx,function(t){var e=t.primaryKey.toString(),r=et(n,e);return n[e]=!0,!r}),this},modify:function(v){var y=this,t=this._ctx.table.hook,m=t.updating.fire,g=t.deleting.fire;return this._write(function(t,e,r,i){var o;if("function"==typeof v)o=m===St&&g===St?v:function(e){var t=bt(e);if(!1===v.call(this,e,this))return!1;if(et(this,"value")){var r=dt(t,this.value),n=m.call(this,r,this.primKey,t,i);n&&(e=this.value,Z(n).forEach(function(t){ft(e,t,n[t])}))}else g.call(this,this.primKey,e,i)};else if(m===St){var s=Z(v),u=s.length;o=function(t){for(var e=!1,r=0;r<u;++r){var n=s[r],i=v[n];lt(t,n)!==i&&(ft(t,n,i),e=!0)}return e}}else{var c=v;v=ht(c),o=function(r){var n=!1,t=m.call(this,v,this.primKey,bt(r),i);return t&&tt(v,t),Z(v).forEach(function(t){var e=v[t];lt(r,t)!==e&&(ft(r,t,e),n=!0)}),t&&(v=ht(c)),n}}var a=0,l=0,n=!1,f=[],h=[],p=null;function b(t){return t&&(f.push(t),h.push(p)),e(new _t("Error modifying one or more objects",f,l,h))}function d(){n&&l+f.length===a&&(0<f.length?b():t(l))}y.clone().raw()._iterate(function(t,e){p=e.primaryKey;var r={primKey:e.primaryKey,value:t,onsuccess:null,onerror:null};function n(t){return f.push(t),h.push(r.primKey),d(),!0}if(!1!==o.call(r,t,r)){var i=!et(r,"value");++a,at(function(){var t=i?e.delete():e.update(r.value);t._hookCtx=r,t.onerror=je(n),t.onsuccess=xe(function(){++l,d()})},n)}else r.onsuccess&&r.onsuccess(r.value)},function(){n=!0,d()},b,r)})},delete:function(){var u=this,c=this._ctx,s=c.range,a=c.table.hook.deleting.fire,l=a!==St;if(!l&&q(c)&&(c.isPrimKey&&!me||!s))return this._write(function(r,n,i){var o=Oe(n),t=s?i.count(s):i.count();t.onerror=o,t.onsuccess=function(){var e=t.result;at(function(){var t=s?i.delete(s):i.clear();t.onerror=o,t.onsuccess=function(){return r(e)}},function(t){return n(t)})}});var f=l?2e3:1e4;return this._write(function(t,e,r,n){var i=0,o=u.clone({keysOnly:!c.isMatch&&!l}).distinct().limit(f).raw(),s=[];t(function e(){return o.each(l?function(t,e){s.push([e.primaryKey,e.value])}:function(t,e){s.push(e.primaryKey)}).then(function(){return l?s.sort(function(t,e){return W(t[0],e[0])}):s.sort(W),N(r,n,s,l,a)}).then(function(){var t=s.length;return i+=t,s=[],t<f?i:e()})}())})}}}),tt(this,{Collection:F,Table:D,Transaction:L,Version:A,WhereClause:M}),S.on("versionchange",function(t){0<t.newVersion?console.warn("Another connection wants to upgrade database '"+S.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+S.name+"'. Closing db now to resume the delete request."),S.close()}),S.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+S.name+"') was blocked"):console.warn("Upgrade '"+S.name+"' blocked by other connection holding version "+t.oldVersion/10)}),c.forEach(function(t){t(S)})}function _e(r,n){return Z(n).forEach(function(t){var e=function t(e){if("function"==typeof e)return new e;if(Q(e))return[t(e[0])];if(e&&"object"===(void 0===e?"undefined":De(e))){var r={};return _e(r,e),r}return e}(n[t]);r[t]=e}),r}function xe(o){return Ut(function(t){var e=t.target,r=e._hookCtx,n=r.value||e.result,i=r&&r.onsuccess;i&&i(n),o&&o(n)},o)}function Oe(e){return Ut(function(t){return Ee(t),e(t.target.error),!1})}function Se(e){return Ut(function(t){e(t.target.result)})}function je(o){return Ut(function(t){var e=t.target,r=e.error,n=e._hookCtx,i=n&&n.onerror;return i&&i(r),Ee(t),o(r),!1})}function Ee(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function ke(e){var t=function(t){return e.next(t)},i=r(t),o=r(function(t){return e.throw(t)});function r(n){return function(t){var e=n(t),r=e.value;return e.done?r:r&&"function"==typeof r.then?r.then(i,o):Q(r)?Ct.all(r).then(i,o):i(r)}}return r(t)()}function Pe(t,e,r,n,i,o,s){this.name=t,this.keyPath=e,this.unique=r,this.multi=n,this.auto=i,this.compound=o,this.dotted=s;var u="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(r?"&":"")+(n?"*":"")+(i?"++":"")+u}function Ae(t,e,r,n){this.name=t,this.primKey=e||new Pe,this.indexes=r||[new Pe],this.instanceTemplate=n,this.mappedClass=null,this.idxByName=ut(r,function(t){return[t.name,t]})}function Te(t){return 1===t.length?t[0]:t}function Ie(t){var e=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return e&&e.bind(t)}return h(mt,ge),rt(we,_),rt(we,{delete:function(t){var e=new we(t),r=e.delete();return r.onblocked=function(t){return e.on("blocked",t),this},r},exists:function(t){return new we(t).open().then(function(t){return t.close(),!0}).catch(we.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(t){var n=Ie(we.dependencies.indexedDB);return n?new Ct(function(e,t){var r=n();r.onsuccess=function(t){e(it(t.target.result,0))},r.onerror=Oe(t)}).then(t):ae.dbnames.toCollection().primaryKeys(t)},defineClass:function(){return function(t){t&&tt(this,t)}},applyStructure:_e,ignoreTransaction:function(t){return Dt.trans?re(Dt.transless,t):t()},vip:function(t){return Gt(function(){return Dt.letThrough=!0,t()})},async:function(e){return function(){try{var t=ke(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ct.resolve(t)}catch(t){return ue(t)}}},spawn:function(t,e,r){try{var n=ke(t.apply(r,e||[]));return n&&"function"==typeof n.then?n:Ct.resolve(n)}catch(t){return ue(t)}},currentTransaction:{get:function(){return Dt.trans||null}},waitFor:function(t,e){var r=Ct.resolve("function"==typeof t?we.ignoreTransaction(t):t).timeout(e||6e4);return Dt.trans?Dt.trans.waitFor(r):r},Promise:Ct,debug:{get:function(){return mt},set:function(t){h(t,"dexie"===t?function(){return!0}:ge)}},derive:s,extend:tt,props:rt,override:ot,Events:ce,getByKeyPath:lt,setByKeyPath:ft,delByKeyPath:function(e,t){"string"==typeof t?ft(e,t,void 0):"length"in t&&[].map.call(t,function(t){ft(e,t,void 0)})},shallowClone:ht,deepClone:bt,getObjectDiff:dt,asap:c,maxKey:fe,minKey:he,addons:[],connections:de,MultiModifyError:Ot.Modify,errnames:m,IndexSpec:Pe,TableSchema:Ae,dependencies:function(){try{return{indexedDB:$.indexedDB||$.mozIndexedDB||$.webkitIndexedDB||$.msIndexedDB,IDBKeyRange:$.IDBKeyRange||$.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"2.0.4",version:"2.0.4".split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,r){return t+e/Math.pow(10,2*r)}),default:we,Dexie:we}),Ct.rejectionMapper=function(t,e){if(!t||t instanceof y||t instanceof TypeError||t instanceof SyntaxError||!t.name||!w[t.name])return t;var r=new w[t.name](e||t.message,t);return"stack"in t&&nt(r,"stack",{get:function(){return this.inner.stack}}),r},(ae=new we("__dbnames")).version(1).stores({dbnames:"name"}),function(){var t="Dexie.DatabaseNames";try{void 0!==("undefined"==typeof localStorage?"undefined":De(localStorage))&&void 0!==$.document&&(JSON.parse(localStorage.getItem(t)||"[]").forEach(function(t){return ae.dbnames.put({name:t}).catch(St)}),localStorage.removeItem(t))}catch(t){}}(),we},"object"===((t=void 0)===n?"undefined":De(n))&&void 0!==r?r.exports=e():"function"==typeof define&&define.amd?define(e):t.Dexie=e()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,R,e){"use strict";var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var c,e=Object.prototype,a=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag",s="object"===(void 0===R?"undefined":D(R)),u=t.regeneratorRuntime;if(u)s&&(R.exports=u);else{(u=t.regeneratorRuntime=s?R.exports:{}).wrap=g;var f="suspendedStart",h="suspendedYield",p="executing",b="completed",d={},l={};l[i]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(T([])));y&&y!==e&&a.call(y,i)&&(l=y);var m=O.prototype=_.prototype=Object.create(l);x.prototype=m.constructor=O,O.constructor=x,O[o]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(m),t},u.awrap=function(t){return{__await:t}},S(j.prototype),j.prototype[n]=function(){return this},u.AsyncIterator=j,u.async=function(t,e,r,n){var i=new j(g(t,e,r,n));return u.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},S(m),m[o]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},u.keys=function(r){var n=[];for(var t in r)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},u.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return o.type="throw",o.arg=r,n.next=t,e&&(n.method="next",n.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=c),d}}}function g(t,e,r,n){var o,s,u,c,i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),l=new A(n||[]);return a._invoke=(o=t,s=r,u=l,c=f,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===b){if("throw"===t)throw e;return I()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=E(r,u);if(n){if(n===d)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===f)throw c=b,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=p;var i=w(o,s,u);if("normal"===i.type){if(c=u.done?b:h,i.arg===d)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(c=b,u.method="throw",u.arg=i.arg)}}),a}function w(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function _(){}function x(){}function O(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function j(c){var e;this._invoke=function(r,n){function t(){return new Promise(function(t,e){!function e(t,r,n,i){var o=w(c[t],c,r);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"===(void 0===u?"undefined":D(u))&&a.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,n,i)},function(t){e("throw",t,n,i)}):Promise.resolve(u).then(function(t){s.value=t,n(s)},function(t){return e("throw",t,n,i)})}i(o.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}}function E(t,e){var r=t.iterator[e.method];if(r===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,E(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=w(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,d;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=c,t.done=!0,t};return n.next=n}}return{next:I}}function I(){return{value:c,done:!0}}}(function(){return this}()||Function("return this")())},{}],3:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(n){function t(t,e,r){n.call(this),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}return i(t,n),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(t("./Subscriber").Subscriber);r.InnerSubscriber=n},{"./Subscriber":10}],4:[function(t,e,r){"use strict";var n=t("./Observable"),i=function(){function e(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},e.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();r.Notification=i},{"./Observable":5}],5:[function(t,e,r){"use strict";var o=t("./util/root"),s=t("./util/toSubscriber"),n=t("./symbol/observable"),i=t("./util/pipe"),u=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,r){var n=this.operator,i=s.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},r.prototype.forEach=function(n,t){var i=this;if(t||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?t=o.root.Rx.config.Promise:o.root.Promise&&(t=o.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,e){var r;r=i.subscribe(function(t){if(r)try{n(t)}catch(t){e(t),r.unsubscribe()}else n(t)},e,t)})},r.prototype._subscribe=function(t){return this.source.subscribe(t)},r.prototype[n.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:i.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var n=this;if(t||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?t=o.root.Rx.config.Promise:o.root.Promise&&(t=o.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},r.create=function(t){return new r(t)},r}();r.Observable=u},{"./symbol/observable":50,"./util/pipe":63,"./util/root":64,"./util/toSubscriber":66}],6:[function(t,e,r){"use strict";r.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},{}],7:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(t("./Subscriber").Subscriber);r.OuterSubscriber=i},{"./Subscriber":10}],8:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./Observable"),o=t("./Subscriber"),s=t("./Subscription"),u=t("./util/ObjectUnsubscribedError"),c=t("./SubjectSubscription"),a=t("./symbol/rxSubscriber"),l=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(o.Subscriber);r.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[a.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},t.prototype.next=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},t.prototype.error=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new u.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},t.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},t.create=function(t,e){return new h(t,e)},t}(i.Observable),h=function(r){function t(t,e){r.call(this),this.destination=t,this.source=e}return n(t,r),t.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},t.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},t}(r.Subject=f);r.AnonymousSubject=h},{"./Observable":5,"./SubjectSubscription":9,"./Subscriber":10,"./Subscription":11,"./symbol/rxSubscriber":51,"./util/ObjectUnsubscribedError":52}],9:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(r){function t(t,e){r.call(this),this.subject=t,this.subscriber=e,this.closed=!1}return n(t,r),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},t}(t("./Subscription").Subscription);r.SubjectSubscription=i},{"./Subscription":11}],10:[function(t,e,r){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=t("./util/isFunction"),i=t("./Subscription"),c=t("./Observer"),a=t("./symbol/rxSubscriber"),l=function(o){function i(t,e,r){switch(o.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=c.empty;break;case 1:if(!t){this.destination=c.empty;break}if("object"===(void 0===t?"undefined":s(t))){if((i=t)instanceof l||"syncErrorThrowable"in i&&i[a.rxSubscriber]){var n=t[a.rxSubscriber]();this.syncErrorThrowable=n.syncErrorThrowable,(this.destination=n).add(this)}else this.syncErrorThrowable=!0,this.destination=new f(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new f(this,t,e,r)}var i}return n(i,o),i.prototype[a.rxSubscriber]=function(){return this},i.create=function(t,e,r){var n=new i(t,e,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},i}(i.Subscription),f=function(s){function t(t,e,r,n){var i;s.call(this),this._parentSubscriber=t;var o=this;u.isFunction(e)?i=e:e&&(i=e.next,r=e.error,n=e.complete,e!==c.empty&&(o=Object.create(e),u.isFunction(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=r,this._complete=n}return n(t,s),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?this.__tryOrSetError(e,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(r.Subscriber=l)},{"./Observer":6,"./Subscription":11,"./symbol/rxSubscriber":51,"./util/isFunction":58}],11:[function(t,e,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=t("./util/isArray"),f=t("./util/isObject"),h=t("./util/isFunction"),p=t("./util/tryCatch"),b=t("./util/errorObject"),d=t("./util/UnsubscriptionError"),n=function(){function n(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return n.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,u=n?n.length:0;r;)r.remove(this),r=++s<u&&n[s]||null;if(h.isFunction(i))p.tryCatch(i).call(this)===b.errorObject&&(e=!0,t=t||(b.errorObject.e instanceof d.UnsubscriptionError?v(b.errorObject.e.errors):[b.errorObject.e]));if(l.isArray(o))for(s=-1,u=o.length;++s<u;){var c=o[s];if(f.isObject(c))if(p.tryCatch(c.unsubscribe).call(c)===b.errorObject){e=!0,t=t||[];var a=b.errorObject.e;a instanceof d.UnsubscriptionError?t=t.concat(v(a.errors)):t.push(a)}}if(e)throw new d.UnsubscriptionError(t)}},n.prototype.add=function(t){if(!t||t===n.EMPTY)return n.EMPTY;if(t===this)return this;var e=t;switch(void 0===t?"undefined":i(t)){case"function":e=new n(t);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var r=e;(e=new n)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},n.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},n.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},n.EMPTY=((t=new n).closed=!0,t),n}();function v(t){return t.reduce(function(t,e){return t.concat(e instanceof d.UnsubscriptionError?e.errors:e)},[])}r.Subscription=n},{"./util/UnsubscriptionError":54,"./util/errorObject":55,"./util/isArray":56,"./util/isFunction":58,"./util/isObject":59,"./util/tryCatch":67}],12:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../observable/from");n.Observable.from=i.from},{"../../Observable":5,"../../observable/from":31}],13:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../observable/fromEvent");n.Observable.fromEvent=i.fromEvent},{"../../Observable":5,"../../observable/fromEvent":32}],14:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../observable/fromPromise");n.Observable.fromPromise=i.fromPromise},{"../../Observable":5,"../../observable/fromPromise":33}],15:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../operator/catch");n.Observable.prototype.catch=i._catch,n.Observable.prototype._catch=i._catch},{"../../Observable":5,"../../operator/catch":34}],16:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../operator/distinct");n.Observable.prototype.distinct=i.distinct},{"../../Observable":5,"../../operator/distinct":35}],17:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../operator/filter");n.Observable.prototype.filter=i.filter},{"../../Observable":5,"../../operator/filter":36}],18:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../operator/map");n.Observable.prototype.map=i.map},{"../../Observable":5,"../../operator/map":37}],19:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../operator/mergeMap");n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},{"../../Observable":5,"../../operator/mergeMap":38}],20:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../operator/retry");n.Observable.prototype.retry=i.retry},{"../../Observable":5,"../../operator/retry":39}],21:[function(t,e,r){"use strict";var n=t("../../Observable"),i=t("../../operator/retryWhen");n.Observable.prototype.retryWhen=i.retryWhen},{"../../Observable":5,"../../operator/retryWhen":40}],22:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../Observable"),s=t("./ScalarObservable"),u=t("./EmptyObservable"),o=function(r){function o(t,e){r.call(this),this.arrayLike=t,(this.scheduler=e)||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(o,r),o.create=function(t,e){var r=t.length;return 0===r?new u.EmptyObservable:1===r?new s.ScalarObservable(t[0],e):new o(t,e)},o.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,i=t.subscriber;i.closed||(n<=r?i.complete():(i.next(e[r]),t.index=r+1,this.schedule(t)))},o.prototype._subscribe=function(t){var e=this.arrayLike,r=this.scheduler,n=e.length;if(r)return r.schedule(o.dispatch,0,{arrayLike:e,index:0,length:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(e[i]);t.complete()},o}(i.Observable);r.ArrayLikeObservable=o},{"../Observable":5,"./EmptyObservable":24,"./ScalarObservable":29}],23:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../Observable"),s=t("./ScalarObservable"),u=t("./EmptyObservable"),c=t("../util/isScheduler"),o=function(r){function o(t,e){r.call(this),this.array=t,(this.scheduler=e)||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(o,r),o.create=function(t,e){return new o(t,e)},o.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t[t.length-1];c.isScheduler(r)?t.pop():r=null;var n=t.length;return 1<n?new o(t,r):1===n?new s.ScalarObservable(t[0],r):new u.EmptyObservable(r)},o.dispatch=function(t){var e=t.array,r=t.index,n=t.count,i=t.subscriber;n<=r?i.complete():(i.next(e[r]),i.closed||(t.index=r+1,this.schedule(t)))},o.prototype._subscribe=function(t){var e=this.array,r=e.length,n=this.scheduler;if(n)return n.schedule(o.dispatch,0,{array:e,index:0,count:r,subscriber:t});for(var i=0;i<r&&!t.closed;i++)t.next(e[i]);t.complete()},o}(i.Observable);r.ArrayObservable=o},{"../Observable":5,"../util/isScheduler":61,"./EmptyObservable":24,"./ScalarObservable":29}],24:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function r(t){e.call(this),this.scheduler=t}return n(r,e),r.create=function(t){return new r(t)},r.dispatch=function(t){t.subscriber.complete()},r.prototype._subscribe=function(t){var e=this.scheduler;if(e)return e.schedule(r.dispatch,0,{subscriber:t});t.complete()},r}(t("../Observable").Observable);r.EmptyObservable=i},{"../Observable":5}],25:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../Observable"),o=t("../util/tryCatch"),s=t("../util/isFunction"),u=t("../util/errorObject"),y=t("../Subscription"),m=Object.prototype.toString;var c=function(i){function v(t,e,r,n){i.call(this),this.sourceObj=t,this.eventName=e,this.selector=r,this.options=n}return n(v,i),v.create=function(t,e,r,n){return s.isFunction(r)&&(n=r,r=void 0),new v(t,e,n,r)},v.setupSubscription=function(t,e,r,n,i){var o,s,u,c,a,l;if((l=t)&&"[object NodeList]"===m.call(l)||(a=t)&&"[object HTMLCollection]"===m.call(a))for(var f=0,h=t.length;f<h;f++)v.setupSubscription(t[f],e,r,n,i);else if((c=t)&&"function"==typeof c.addEventListener&&"function"==typeof c.removeEventListener){var p=t;t.addEventListener(e,r,i),o=function(){return p.removeEventListener(e,r,i)}}else if((u=t)&&"function"==typeof u.on&&"function"==typeof u.off){var b=t;t.on(e,r),o=function(){return b.off(e,r)}}else{if(!(s=t)||"function"!=typeof s.addListener||"function"!=typeof s.removeListener)throw new TypeError("Invalid event target");var d=t;t.addListener(e,r),o=function(){return d.removeListener(e,r)}}n.add(new y.Subscription(o))},v.prototype._subscribe=function(n){var t=this.sourceObj,e=this.eventName,r=this.options,i=this.selector;v.setupSubscription(t,e,i?function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=o.tryCatch(i).apply(void 0,t);r===u.errorObject?n.error(u.errorObject.e):n.next(r)}:function(t){return n.next(t)},n,r)},v}(i.Observable);r.FromEventObservable=c},{"../Observable":5,"../Subscription":11,"../util/errorObject":55,"../util/isFunction":58,"../util/tryCatch":67}],26:[function(t,e,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=t("../util/isArray"),u=t("../util/isArrayLike"),c=t("../util/isPromise"),a=t("./PromiseObservable"),l=t("./IteratorObservable"),f=t("./ArrayObservable"),h=t("./ArrayLikeObservable"),p=t("../symbol/iterator"),b=t("../Observable"),d=t("../operators/observeOn"),v=t("../symbol/observable"),n=function(r){function n(t,e){r.call(this,null),this.ish=t,this.scheduler=e}return o(n,r),n.create=function(t,e){if(null!=t){if("function"==typeof t[v.observable])return t instanceof b.Observable&&!e?t:new n(t,e);if(s.isArray(t))return new f.ArrayObservable(t,e);if(c.isPromise(t))return new a.PromiseObservable(t,e);if("function"==typeof t[p.iterator]||"string"==typeof t)return new l.IteratorObservable(t,e);if(u.isArrayLike(t))return new h.ArrayLikeObservable(t,e)}throw new TypeError((null!==t&&(void 0===t?"undefined":i(t))||t)+" is not observable")},n.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[v.observable]().subscribe(t):e[v.observable]().subscribe(new d.ObserveOnSubscriber(t,r,0))},n}(b.Observable);r.FromObservable=n},{"../Observable":5,"../operators/observeOn":46,"../symbol/iterator":49,"../symbol/observable":50,"../util/isArray":56,"../util/isArrayLike":57,"../util/isPromise":60,"./ArrayLikeObservable":22,"./ArrayObservable":23,"./IteratorObservable":27,"./PromiseObservable":28}],27:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("../util/root"),i=t("../Observable"),s=t("../symbol/iterator"),u=function(r){function i(t,e){if(r.call(this),this.scheduler=e,null==t)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[s.iterator];if(!e&&"string"==typeof t)return new c(t);if(!e&&void 0!==t.length)return new a(t);if(!e)throw new TypeError("object is not iterable");return t[s.iterator]()}(t)}return n(i,r),i.create=function(t,e){return new i(t,e)},i.dispatch=function(t){var e=t.index,r=t.hasError,n=t.iterator,i=t.subscriber;if(r)i.error(t.error);else{var o=n.next();o.done?i.complete():(i.next(o.value),t.index=e+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},i.prototype._subscribe=function(t){var e=this.iterator,r=this.scheduler;if(r)return r.schedule(i.dispatch,0,{index:0,iterator:e,subscriber:t});for(;;){var n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed){"function"==typeof e.return&&e.return();break}}},i}(i.Observable);r.IteratorObservable=u;var c=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),a=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(r=e,"number"!=typeof r||!o.root.isFinite(r)))return e;var r;if(n=e,i=+n,(e=(0===i?i:isNaN(i)?i:i<0?-1:1)*Math.floor(Math.abs(e)))<=0)return 0;var n,i;if(l<e)return l;return e}(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var l=Math.pow(2,53)-1},{"../Observable":5,"../symbol/iterator":49,"../util/root":64}],28:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("../util/root"),n=function(r){function n(t,e){r.call(this),this.promise=t,this.scheduler=e}return i(n,r),n.create=function(t,e){return new n(t,e)},n.prototype._subscribe=function(e){var r=this,t=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):t.then(function(t){r.value=t,r._isScalar=!0,e.closed||(e.next(t),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(t){o.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!e.closed)return n.schedule(s,0,{value:this.value,subscriber:e})}else t.then(function(t){r.value=t,r._isScalar=!0,e.closed||e.add(n.schedule(s,0,{value:t,subscriber:e}))},function(t){e.closed||e.add(n.schedule(u,0,{err:t,subscriber:e}))}).then(null,function(t){o.root.setTimeout(function(){throw t})})},n}(t("../Observable").Observable);function s(t){var e=t.value,r=t.subscriber;r.closed||(r.next(e),r.complete())}function u(t){var e=t.err,r=t.subscriber;r.closed||r.error(e)}r.PromiseObservable=n},{"../Observable":5,"../util/root":64}],29:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(r){function n(t,e){r.call(this),this.value=t,this.scheduler=e,this._isScalar=!0,e&&(this._isScalar=!1)}return i(n,r),n.create=function(t,e){return new n(t,e)},n.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;e?n.complete():(n.next(r),n.closed||(t.done=!0,this.schedule(t)))},n.prototype._subscribe=function(t){var e=this.value,r=this.scheduler;if(r)return r.schedule(n.dispatch,0,{done:!1,value:e,subscriber:t});t.next(e),t.closed||t.complete()},n}(t("../Observable").Observable);r.ScalarObservable=n},{"../Observable":5}],30:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=t("../../util/root"),f=t("../../util/tryCatch"),h=t("../../util/errorObject"),n=t("../../Observable"),o=t("../../Subscriber"),s=t("../../operators/map");function c(t,e){return void 0===e&&(e=null),new y({method:"GET",url:t,headers:e})}function a(t,e,r){return new y({method:"POST",url:t,body:e,headers:r})}function l(t,e){return new y({method:"DELETE",url:t,headers:e})}function p(t,e,r){return new y({method:"PUT",url:t,body:e,headers:r})}function b(t,e,r){return new y({method:"PATCH",url:t,body:e,headers:r})}r.ajaxGet=c,r.ajaxPost=a,r.ajaxDelete=l,r.ajaxPut=p,r.ajaxPatch=b;var d=s.map(function(t,e){return t.response});function v(t,e){return d(new y({method:"GET",url:t,responseType:"json",headers:e}))}r.ajaxGetJSON=v;var y=function(n){function e(t){n.call(this);var e={async:!0,createXHR:function(){return this.crossDomain?function(){if(u.root.XMLHttpRequest)return new u.root.XMLHttpRequest;if(u.root.XDomainRequest)return new u.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}.call(this):function(){if(u.root.XMLHttpRequest)return new u.root.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(t=e[r],new u.root.ActiveXObject(t))break}catch(t){}return new u.root.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)e.url=t;else for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);this.request=e}var t;return i(e,n),e.prototype._subscribe=function(t){return new m(t,this.request)},e.create=((t=function(t){return new e(t)}).get=c,t.post=a,t.delete=l,t.put=p,t.patch=b,t.getJSON=v,t),e}(n.Observable);r.AjaxObservable=y;var m=function(n){function t(t,e){n.call(this,t),this.request=e,this.done=!1;var r=e.headers=e.headers||{};e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||u.root.FormData&&e.body instanceof u.root.FormData||void 0===e.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),e.body=this.serializeBody(e.body,e.headers["Content-Type"]),this.send()}return i(t,n),t.prototype.next=function(t){this.done=!0;var e=this.xhr,r=this.request,n=this.destination,i=new g(t,e,r);n.next(i)},t.prototype.send=function(){var t=this.request,e=this.request,r=e.user,n=e.method,i=e.url,o=e.async,s=e.password,u=e.headers,c=e.body,a=t.createXHR,l=f.tryCatch(a).call(t);if(l===h.errorObject)this.error(h.errorObject.e);else{this.xhr=l,this.setupEvents(l,t);if((r?f.tryCatch(l.open).call(l,n,i,o,r,s):f.tryCatch(l.open).call(l,n,i,o))===h.errorObject)return this.error(h.errorObject.e),null;if(o&&(l.timeout=t.timeout,l.responseType=t.responseType),"withCredentials"in l&&(l.withCredentials=!!t.withCredentials),this.setHeaders(l,u),(c?f.tryCatch(l.send).call(l,c):f.tryCatch(l.send).call(l))===h.errorObject)return this.error(h.errorObject.e),null}return l},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(u.root.FormData&&e instanceof u.root.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setRequestHeader(r,e[r])},t.prototype.setupEvents=function(t,e){var r=e.progressSubscriber;function i(t){var e=i.subscriber,r=i.progressSubscriber,n=i.request;r&&r.error(t),e.error(new x(this,n))}if((t.ontimeout=i).request=e,i.subscriber=this,i.progressSubscriber=r,t.upload&&"withCredentials"in t){var n,o;if(r)n=function(t){n.progressSubscriber.next(t)},u.root.XDomainRequest?t.onprogress=n:t.upload.onprogress=n,n.progressSubscriber=r;o=function(t){var e=o,r=e.progressSubscriber,n=e.subscriber,i=e.request;r&&r.error(t),n.error(new w("ajax error",this,i))},(t.onerror=o).request=e,o.subscriber=this,o.progressSubscriber=r}function s(t){var e=s.subscriber,r=s.progressSubscriber,n=s.request;if(4===this.readyState){var i=1223===this.status?204:this.status,o="text"===this.responseType?this.response||this.responseText:this.response;0===i&&(i=o?200:0),200<=i&&i<300?(r&&r.complete(),e.next(t),e.complete()):(r&&r.error(t),e.error(new w("ajax error "+i,this,n)))}}(t.onreadystatechange=s).subscriber=this,s.progressSubscriber=r,s.request=e},t.prototype.unsubscribe=function(){var t=this.done,e=this.xhr;!t&&e&&4!==e.readyState&&"function"==typeof e.abort&&e.abort(),n.prototype.unsubscribe.call(this)},t}(o.Subscriber);r.AjaxSubscriber=m;var g=function(t,e,r){this.originalEvent=t,this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=_(this.responseType,e)};r.AjaxResponse=g;var w=function(n){function t(t,e,r){n.call(this,t),this.message=t,this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=_(this.responseType,e)}return i(t,n),t}(Error);function _(t,e){switch(t){case"json":return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null");case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var x=function(r){function t(t,e){r.call(this,"ajax timeout",t,e)}return i(t,r),t}(r.AjaxError=w);r.AjaxTimeoutError=x},{"../../Observable":5,"../../Subscriber":10,"../../operators/map":44,"../../util/errorObject":55,"../../util/root":64,"../../util/tryCatch":67}],31:[function(t,e,r){"use strict";var n=t("./FromObservable");r.from=n.FromObservable.create},{"./FromObservable":26}],32:[function(t,e,r){"use strict";var n=t("./FromEventObservable");r.fromEvent=n.FromEventObservable.create},{"./FromEventObservable":25}],33:[function(t,e,r){"use strict";var n=t("./PromiseObservable");r.fromPromise=n.PromiseObservable.create},{"./PromiseObservable":28}],34:[function(t,e,r){"use strict";var n=t("../operators/catchError");r._catch=function(t){return n.catchError(t)(this)}},{"../operators/catchError":41}],35:[function(t,e,r){"use strict";var n=t("../operators/distinct");r.distinct=function(t,e){return n.distinct(t,e)(this)}},{"../operators/distinct":42}],36:[function(t,e,r){"use strict";var n=t("../operators/filter");r.filter=function(t,e){return n.filter(t,e)(this)}},{"../operators/filter":43}],37:[function(t,e,r){"use strict";var n=t("../operators/map");r.map=function(t,e){return n.map(t,e)(this)}},{"../operators/map":44}],38:[function(t,e,r){"use strict";var n=t("../operators/mergeMap");r.mergeMap=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMap(t,e,r)(this)}},{"../operators/mergeMap":45}],39:[function(t,e,r){"use strict";var n=t("../operators/retry");r.retry=function(t){return void 0===t&&(t=-1),n.retry(t)(this)}},{"../operators/retry":47}],40:[function(t,e,r){"use strict";var n=t("../operators/retryWhen");r.retryWhen=function(t){return n.retryWhen(t)(this)}},{"../operators/retryWhen":48}],41:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=t("../OuterSubscriber"),o=t("../util/subscribeToResult");r.catchError=function(n){return function(t){var e=new s(n),r=t.lift(e);return e.caught=r}};var s=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.selector,this.caught))},t}(),u=function(n){function t(t,e,r){n.call(this,t),this.selector=e,this.caught=r}return i(t,n),t.prototype.error=function(t){if(!this.isStopped){var e=void 0;try{e=this.selector(t,this.caught)}catch(t){return void n.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,e))}},t}(n.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":65}],42:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=t("../OuterSubscriber"),o=t("../util/subscribeToResult"),s=t("../util/Set");r.distinct=function(e,r){return function(t){return t.lift(new u(e,r))}};var u=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.keySelector,this.flushes))},t}(),c=function(n){function t(t,e,r){n.call(this,t),this.keySelector=e,this.values=new s.Set,r&&this.add(o.subscribeToResult(this,r))}return i(t,n),t.prototype.notifyNext=function(t,e,r,n,i){this.values.clear()},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},t.prototype._useKeySelector=function(t){var e,r=this.destination;try{e=this.keySelector(t)}catch(t){return void r.error(t)}this._finalizeNext(e,t)},t.prototype._finalizeNext=function(t,e){var r=this.values;r.has(t)||(r.add(t),this.destination.next(e))},t}(n.OuterSubscriber);r.DistinctSubscriber=c},{"../OuterSubscriber":7,"../util/Set":53,"../util/subscribeToResult":65}],43:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=t("../Subscriber");r.filter=function(e,r){return function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(n){function t(t,e,r){n.call(this,t),this.predicate=e,this.thisArg=r,this.count=0}return i(t,n),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t}(n.Subscriber)},{"../Subscriber":10}],44:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=t("../Subscriber");r.map=function(e,r){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();r.MapOperator=o;var s=function(n){function t(t,e,r){n.call(this,t),this.project=e,this.count=0,this.thisArg=r||this}return i(t,n),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(n.Subscriber)},{"../Subscriber":10}],45:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("../util/subscribeToResult"),i=t("../OuterSubscriber");r.mergeMap=function(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(t){return"number"==typeof r&&(n=r,r=null),t.lift(new s(e,r,n))}};var s=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.resultSelector,this.concurrent))},t}();r.MergeMapOperator=s;var u=function(i){function t(t,e,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY),i.call(this,t),this.project=e,this.resultSelector=r,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,i),t.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},t.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){this.add(o.subscribeToResult(this,t,e,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},t.prototype._notifyResultSelector=function(t,e,r,n){var i;try{i=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(i)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);r.MergeMapSubscriber=u},{"../OuterSubscriber":7,"../util/subscribeToResult":65}],46:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=t("../Subscriber"),o=t("../Notification");r.observeOn=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler,this.delay))},t}();r.ObserveOnOperator=s;var u=function(n){function e(t,e,r){void 0===r&&(r=0),n.call(this,t),this.scheduler=e,this.delay=r}return i(e,n),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},e}(n.Subscriber);r.ObserveOnSubscriber=u;var c=function(t,e){this.notification=t,this.destination=e};r.ObserveOnMessage=c},{"../Notification":4,"../Subscriber":10}],47:[function(t,e,r){"use strict";var i=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=t("../Subscriber");r.retry=function(e){return void 0===e&&(e=-1),function(t){return t.lift(new o(e,t))}};var o=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.count,this.source))},t}(),s=function(n){function t(t,e,r){n.call(this,t),this.count=e,this.source=r}return i(t,n),t.prototype.error=function(t){if(!this.isStopped){var e=this.source,r=this.count;if(0===r)return n.prototype.error.call(this,t);-1<r&&(this.count=r-1),e.subscribe(this._unsubscribeAndRecycle())}},t}(n.Subscriber)},{"../Subscriber":10}],48:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("../Subject"),s=t("../util/tryCatch"),u=t("../util/errorObject"),i=t("../OuterSubscriber"),c=t("../util/subscribeToResult");r.retryWhen=function(e){return function(t){return t.lift(new a(e,t))}};var a=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.notifier,this.source))},t}(),l=function(i){function t(t,e,r){i.call(this,t),this.notifier=e,this.source=r}return n(t,i),t.prototype.error=function(t){if(!this.isStopped){var e=this.errors,r=this.retries,n=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(e=new o.Subject,(r=s.tryCatch(this.notifier)(e))===u.errorObject)return i.prototype.error.call(this,u.errorObject.e);n=c.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=e,this.retries=r,this.retriesSubscription=n,e.next(t)}},t.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(t,e,r,n,i){var o=this.errors,s=this.retries,u=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=o,this.retries=s,this.retriesSubscription=u,this.source.subscribe(this)},t}(i.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":8,"../util/errorObject":55,"../util/subscribeToResult":65,"../util/tryCatch":67}],49:[function(t,e,r){"use strict";var n=t("../util/root");function i(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}r.symbolIteratorPonyfill=i,r.iterator=i(n.root),r.$$iterator=r.iterator},{"../util/root":64}],50:[function(t,e,r){"use strict";var n=t("../util/root");function i(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}r.getSymbolObservable=i,r.observable=i(n.root),r.$$observable=r.observable},{"../util/root":64}],51:[function(t,e,r){"use strict";var n=t("../util/root").root.Symbol;r.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",r.$$rxSubscriber=r.rxSubscriber},{"../util/root":64}],52:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);r.ObjectUnsubscribedError=i},{}],53:[function(t,e,r){"use strict";var n=t("./root");function i(){return function(){function t(){this._values=[]}return t.prototype.add=function(t){this.has(t)||this._values.push(t)},t.prototype.has=function(t){return-1!==this._values.indexOf(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._values.length=0},t}()}r.minimalSetImpl=i,r.Set=n.root.Set||i()},{"./root":64}],54:[function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(r){function t(t){r.call(this),this.errors=t;var e=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=e.name="UnsubscriptionError",this.stack=e.stack,this.message=e.message}return n(t,r),t}(Error);r.UnsubscriptionError=i},{}],55:[function(t,e,r){"use strict";r.errorObject={e:{}}},{}],56:[function(t,e,r){"use strict";r.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},{}],57:[function(t,e,r){"use strict";r.isArrayLike=function(t){return t&&"number"==typeof t.length}},{}],58:[function(t,e,r){"use strict";r.isFunction=function(t){return"function"==typeof t}},{}],59:[function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.isObject=function(t){return null!=t&&"object"===(void 0===t?"undefined":n(t))}},{}],60:[function(t,e,r){"use strict";r.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},{}],61:[function(t,e,r){"use strict";r.isScheduler=function(t){return t&&"function"==typeof t.schedule}},{}],62:[function(t,e,r){"use strict";r.noop=function(){}},{}],63:[function(t,e,r){"use strict";var n=t("./noop");function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:n.noop}r.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i(t)},r.pipeFromArray=i},{"./noop":62}],64:[function(t,e,i){(function(t){"use strict";var e="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,n=e||void 0!==t&&t||r;i.root=n,function(){if(!n)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(t,e,r){"use strict";var f=t("./root"),h=t("./isArrayLike"),p=t("./isPromise"),b=t("./isObject"),d=t("../Observable"),v=t("../symbol/iterator"),y=t("../InnerSubscriber"),m=t("../symbol/observable");r.subscribeToResult=function(t,e,r,n){var i=new y.InnerSubscriber(t,r,n);if(i.closed)return null;if(e instanceof d.Observable)return e._isScalar?(i.next(e.value),i.complete(),null):(i.syncErrorThrowable=!0,e.subscribe(i));if(h.isArrayLike(e)){for(var o=0,s=e.length;o<s&&!i.closed;o++)i.next(e[o]);i.closed||i.complete()}else{if(p.isPromise(e))return e.then(function(t){i.closed||(i.next(t),i.complete())},function(t){return i.error(t)}).then(null,function(t){f.root.setTimeout(function(){throw t})}),i;if(e&&"function"==typeof e[v.iterator])for(var u=e[v.iterator]();;){var c=u.next();if(c.done){i.complete();break}if(i.next(c.value),i.closed)break}else if(e&&"function"==typeof e[m.observable]){var a=e[m.observable]();if("function"==typeof a.subscribe)return a.subscribe(new y.InnerSubscriber(t,r,n));i.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var l="You provided "+(b.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";i.error(new TypeError(l))}}return null}},{"../InnerSubscriber":3,"../Observable":5,"../symbol/iterator":49,"../symbol/observable":50,"./isArrayLike":57,"./isObject":59,"./isPromise":60,"./root":64}],66:[function(t,e,r){"use strict";var n=t("../Subscriber"),i=t("../symbol/rxSubscriber"),o=t("../Observer");r.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(o.empty)}},{"../Observer":6,"../Subscriber":10,"../symbol/rxSubscriber":51}],67:[function(t,e,r){"use strict";var n,i=t("./errorObject");function o(){try{return n.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}r.tryCatch=function(t){return n=t,o}},{"./errorObject":55}],68:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=t("rxjs/Observable"),s=t("rxjs/observable/dom/AjaxObservable");t("rxjs/add/operator/map"),t("rxjs/add/operator/filter"),t("rxjs/add/operator/mergeMap"),t("rxjs/add/operator/distinct"),t("rxjs/add/operator/catch"),t("rxjs/add/observable/from"),t("rxjs/add/observable/fromEvent"),t("rxjs/add/observable/fromPromise"),t("rxjs/add/operator/retry"),t("rxjs/add/operator/retryWhen");var o,u=t("dexie"),c=(o=u)&&o.__esModule?o:{default:o};var a=function(){function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o)}return n(o,null,[{key:"createIndexedDB",value:function(t){return new c.default(t)}},{key:"getIndexedFavoriteRequests",value:function(t){return i.Observable.fromPromise(t.favoriteRequests.toArray()).mergeMap(function(t){return t})}},{key:"getIndexedReviewRequests",value:function(t){return i.Observable.fromPromise(t.reviewRequests.toArray()).mergeMap(function(t){return t})}},{key:"getIndexedRestaurants",value:function(t){return i.Observable.fromPromise(t[o.DATABASE_NAME].toArray()).mergeMap(function(t){return t})}},{key:"getIndexedReviews",value:function(t){return i.Observable.fromPromise(t.reviews.toArray()).mergeMap(function(t){return t})}},{key:"createIndexedStores",value:function(r,n){return new Promise(function(t,e){try{return r.version(o.DATABASE_VERSION).stores(n)}catch(t){if("Cannot add version when database is open"===t.message)return r.close(),r.version(o.DATABASE_VERSION).stores(n),r.open()}t(r)})}},{key:"deleteIndexedDB",value:function(t){return t.delete()}},{key:"initIndexedDB",value:function(t){return t.open()}},{key:"addIDBEventListener",value:function(t,e,r){t.on(e,r)}},{key:"ifIndexedDBEmpty",value:function(t,n){return new Promise(function(e,r){o.addIDBEventListener(t,"ready",function(){return t[n].count(function(t){return 0===t?e():r("DB not empty")})})})}},{key:"indexedTableOpen",value:function(t,e){return t.transaction("rw",o.DATABASE_NAME,function(){return e()})}},{key:"fetchRestaurants",value:function(t){return s.AjaxObservable.create.getJSON(o.API_URL).retry(2).mergeMap(function(t){return i.Observable.from(t)}).catch(function(){return o.getIndexedRestaurants(t)})}},{key:"fetchReviewsByID",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return s.AjaxObservable.create.getJSON("./"+e+"reviews/?restaurant_id="+t)}},{key:"addReviewByRestaurant",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return s.AjaxObservable.create.post("./"+e+"reviews/",t)}},{key:"removeReviewByID",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return s.AjaxObservable.create.delete("./"+e+"reviews/"+t)}},{key:"entryExists",value:function(n,i){return new Promise(function(e,r){n.transaction("rw",o.DATABASE_NAME,function(){var t;(t=n[o.DATABASE_NAME]).get.apply(t,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(i)).then(function(t){return e(t)}).catch(function(t){r(t)})})})}},{key:"needsUpdate",value:function(){return new Promise(function(t,e){var r=new XMLHttpRequest;r.open("HEAD",url),r.onreadystatechange=function(){this.readyState===this.DONE?304!==this.status&&404!==this.status&&t():e()},r.send()})}},{key:"fetchRestaurantById",value:function(e,t){return s.AjaxObservable.create.getJSON(""+o.API_URL+e).catch(function(){return o.getIndexedRestaurants(t).filter(function(t){return t.id===Number(e)})})}},{key:"fetchRestaurantByCuisine",value:function(t,e,r){return t.filter(function(t){return t.cuisine_type===e}).subscribe(function(t){return r(null,t)},function(t){return r(t,null)})}},{key:"fetchRestaurantByNeighborhood",value:function(t,e,r){return t.filter(function(t){return t.neighborhood===e}).subscribe(function(t){return r(null,t)},function(t){return r(t,null)})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(t,e,r){return t.filter(function(t){return("all"!==e&&t.cuisine_type===e||"all"===e)&&("all"!==r&&t.neighborhood===r||"all"===r)})}},{key:"fetchNeighborhoods",value:function(t){return t.map(function(t){return t.neighborhood}).distinct()}},{key:"fetchCuisines",value:function(t){return t.map(function(t){return t.cuisine_type}).distinct()}},{key:"mapMarkerForRestaurant",value:function(t,e){return new google.maps.Marker({position:t.latlng,title:t.name,url:o.urlForRestaurant(t),map:e,animation:google.maps.Animation.DROP})}},{key:"API_URL",get:function(){return"/restaurants/"}},{key:"DATABASE_NAME",get:function(){return"restaurants"}},{key:"DATABASE_VERSION",get:function(){return 1}}]),o}();a.setFavorite=function(t,e){return s.AjaxObservable.create.put("./restaurants/"+t+"/?is_favorite="+e)},a.urlForRestaurant=function(t){return"./review?id="+t.id},a.imageUrlForRestaurant=function(t){return"./../img/"+(void 0!==t.photograph?t.photograph:"placeholder")},r.default=a},{dexie:1,"rxjs/Observable":5,"rxjs/add/observable/from":12,"rxjs/add/observable/fromEvent":13,"rxjs/add/observable/fromPromise":14,"rxjs/add/operator/catch":15,"rxjs/add/operator/distinct":16,"rxjs/add/operator/filter":17,"rxjs/add/operator/map":18,"rxjs/add/operator/mergeMap":19,"rxjs/add/operator/retry":20,"rxjs/add/operator/retryWhen":21,"rxjs/observable/dom/AjaxObservable":30}],69:[function(t,e,r){"use strict";var n,i=t("./DBHelper"),o=(n=i)&&n.__esModule?n:{default:n},s=t("rxjs/Observable"),u=t("rxjs/Subject");t("rxjs/add/observable/fromPromise"),t("rxjs/add/operator/filter"),t("regenerator-runtime/runtime");var c,a=new u.Subject;c=regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,setInterval(function(){navigator.onLine!==e&&(a.next(navigator.onLine),e=navigator.onLine)},500);case 2:case"end":return t.stop()}},t,void 0)}),function(){var u=c.apply(this,arguments);new Promise(function(o,s){return function e(t,r){try{var n=u[t](r),i=n.value}catch(t){return void s(t)}if(!n.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}();var l=o.default.createIndexedDB(o.default.DATABASE_NAME);o.default.createIndexedStores(l,{restaurants:"id++,name,neighborhood,cuisine_type",reviews:"id++,name,restaurant_id,createdAt,updatedAt,rating,comments",favoriteRequests:"id++,restaurantID",reviewRequests:"id++,reviewID"}).then(function(t){t.favoriteRequests.count(function(t){if(0<t)return f()}),t.reviewRequests.count(function(t){if(0<t)return h()})});var f=function(){return new Promise(function(t,e){o.default.getIndexedFavoriteRequests(l).mergeMap(function(r){return s.Observable.fromPromise(new Promise(function(e,t){l.restaurants.where("id").equals(r.restaurantID).first(function(t){return e(t)})}))}).subscribe(function(t){s.Observable.fromPromise(fetch("./restaurants/"+t.id+"/?is_favorite="+t.is_favorite,{method:"PUT"})).retryWhen(function(){return a.filter(function(t){return t})}).subscribe(function(){},function(t){return e(t)},function(){l.favoriteRequests.where("restaurantID").equals(t.id).delete()})},function(t){return e(t)},function(){return t()})})},h=function(){return new Promise(function(t,n){o.default.getIndexedReviewRequests(l).mergeMap(function(r){return s.Observable.fromPromise(new Promise(function(t,e){l.reviews.get(Number(r.reviewID)).then(t).catch(e)}))}).subscribe(function(t){var e=new FormData;for(var r in t)e.append(r,t[r]);s.Observable.fromPromise(fetch("./reviews/",{method:"POST",body:e})).retryWhen(function(){return a.filter(function(t){return t})}).subscribe(void 0,function(t){return n(t)},function(){l.reviewRequests.where("id").equals(t.id).delete()})},function(t){return n(t)},function(){return t()})})};addEventListener("install",function(t){var n={credentials:"omit",headers:{},referrer:"http://localhost:1337/",referrerPolicy:"no-referrer-when-downgrade",body:null,method:"GET",mode:"no-cors"},e=new Request("https://maps.googleapis.com/maps/api/js?key=AIzaSyCZyUeaJZv0dXSBsJqALEkJmS5nKRZJDuY&libraries=places&callback=initMap",n);t.waitUntil(caches.open("v1").then(function(r){return Promise.all([r.addAll(["/","/review","/img/star.png","/img/star_unchecked.png","/img/placeholder.jpg","/img/placeholder-100-1x.jpg","/img/placeholder-100-2x.jpg","/img/placeholder-100-3x.jpg","/sw.js","/js/main.js","/css/styles.css","https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css"]),fetch(e).then(function(t){return r.put(e,t)}),Promise.all(["https://maps.googleapis.com/maps-api-v3/api/js/33/5/intl/pl_ALL/common.js","https://maps.googleapis.com/maps-api-v3/api/js/33/5/intl/pl_ALL/util.js","https://maps.googleapis.com/maps-api-v3/api/js/33/5/intl/pl_ALL/map.js","https://maps.googleapis.com/maps-api-v3/api/js/33/5/intl/pl_ALL/marker.js","https://maps.googleapis.com/maps-api-v3/api/js/33/5/intl/pl_ALL/stats.js","https://maps.googleapis.com/maps-api-v3/api/js/33/5/intl/pl_ALL/onion.js","https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png","https://maps.gstatic.com/mapfiles/openhand_8_8.cur","https://maps.gstatic.com/mapfiles/transparent.png","https://maps.googleapis.com/maps/api/js/ViewportInfoService.GetViewportInfo?1m6&1m2&1d40.55965355640603&2d-74.93700426125827&2m2&1d40.88229899141979&2d-73.04276332020981&2u12&4spl-PL&5e0&6sm%40426000000&7b0&8e0&callback=_xdc_._yz6io7&key=AIzaSyCZyUeaJZv0dXSBsJqALEkJmS5nKRZJDuY&token=37144","https://maps.googleapis.com/maps/api/js/AuthenticationService.Authenticate?1shttp%3A%2F%2Flocalhost%3A1337%2F&4sAIzaSyCZyUeaJZv0dXSBsJqALEkJmS5nKRZJDuY&callback=_xdc_._n5k7dh&key=AIzaSyCZyUeaJZv0dXSBsJqALEkJmS5nKRZJDuY&token=107918"].map(function(e){return fetch(e,n).then(function(t){return r.put(new Request(e,n),t)})}))])}))}),addEventListener("activate",function(t){return t.waitUntil(caches.keys().then(function(t){return t.filter(function(t){return"v1"!==t}).map(function(t){return caches.delete(t)})}))}),addEventListener("fetch",function(n){n.respondWith(caches.match(n.request,{ignoreSearch:!0,ignoreVary:!0}).then(function(t){return void 0!==t?t:fetch(n.request).then(function(t){var e=void 0;if(t&&t.url){var r=(e=t.clone()).url.split("/");if("undefined.jpg"===r[r.length-1])return caches.match("/img/placeholder.jpg").then(function(t){if(t)return t});if("restaurants"===r[r.length-2]||"reviews"===r[r.length-2])return e;"PUT"!==n.request.method&&"DELETE"!==n.request.method&&(caches.open("v1").then(function(t){return t.put(n.request,e)}),caches.match(n.request).then(function(t){if(t)return t}))}return t}).catch(function(t){return console.error(t),new Response("404 failed",{status:404,statusText:"Not found"})})}))}),addEventListener("message",function(t){if("skipWaiting"===t.data.action)return(void 0).skipWaiting()}),addEventListener("sync",function(t){return"syncFavorite"===t.tag?t.waitUntil(f()):"syncReview"===t.tag?t.waitUntil(h()):void 0})},{"./DBHelper":68,"regenerator-runtime/runtime":2,"rxjs/Observable":5,"rxjs/Subject":8,"rxjs/add/observable/fromPromise":14,"rxjs/add/operator/filter":17}]},{},[69]);